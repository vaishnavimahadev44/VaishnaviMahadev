<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evisa ICS LEGAL</title>
    <link rel="stylesheet" href="css/style.css">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
    <script src="https://www.paypal.com/sdk/js?client-id=AdlV7G8VvGHjtfSf2Mf77GNbYFb9kGEX8b2-tV6urOW0xqr8XATjdnlw8cRY4JopgaCLkwVHvc06dwsf&currency=GBP"></script>
    
    <style>
        :root {
            --primary: #0a2540;
            --primary-light: #1e3a8a;
            --secondary: #6366f1;
            --accent: #f59e0b;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --dark: #0f172a;
            --dark-gray: #475569;
            --gray: #64748b;
            --light-gray: #94a3b8;
            --lighter-gray: #e2e8f0;
            --light: #ffffff;
            --off-white: #f8fafc;
            --gradient: linear-gradient(135deg, var(--primary), var(--secondary));
            --gradient-light: linear-gradient(135deg, #f1f5f9, #e2e8f0);
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--light);
            color: var(--primary);
            margin: 0;
            padding: 0;
            line-height: 1.6;
            overflow-x: hidden;
        }

        
        .background-animations {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }

        
        .particle {
            position: absolute;
            background: linear-gradient(45deg, rgba(99, 102, 241, 0.15), rgba(10, 37, 64, 0.15));
            border-radius: 50%;
            animation: float 20s infinite linear;
            filter: blur(1px);
        }

        .particle:nth-child(1) {
            width: 80px;
            height: 80px;
            top: 10%;
            left: 10%;
            animation-delay: 0s;
            animation-duration: 25s;
        }

        .particle:nth-child(2) {
            width: 120px;
            height: 120px;
            top: 20%;
            right: 15%;
            animation-delay: -5s;
            animation-duration: 30s;
        }

        .particle:nth-child(3) {
            width: 60px;
            height: 60px;
            top: 60%;
            left: 20%;
            animation-delay: -10s;
            animation-duration: 20s;
        }

        .particle:nth-child(4) {
            width: 100px;
            height: 100px;
            top: 70%;
            right: 25%;
            animation-delay: -15s;
            animation-duration: 35s;
        }

        .particle:nth-child(5) {
            width: 40px;
            height: 40px;
            top: 40%;
            left: 60%;
            animation-delay: -8s;
            animation-duration: 18s;
        }
        
        .particle:nth-child(6) {
            width: 90px;
            height: 90px;
            top: 80%;
            left: 40%;
            animation-delay: -12s;
            animation-duration: 28s;
        }
        
        .particle:nth-child(7) {
            width: 70px;
            height: 70px;
            top: 25%;
            left: 80%;
            animation-delay: -15s;
            animation-duration: 22s;
        }
        
        .particle:nth-child(8) {
            width: 55px;
            height: 55px;
            top: 90%;
            left: 20%;
            animation-delay: -18s;
            animation-duration: 26s;
        }

        
        .animated-shape {
            position: absolute;
            opacity: 0.08;
            animation: rotate 30s infinite linear;
            filter: blur(2px);
        }

        .shape-1 {
            width: 200px;
            height: 200px;
            background: var(--primary);
            border-radius: 50%;
            top: 15%;
            left: 5%;
            animation-delay: 0s;
        }

        .shape-2 {
            width: 150px;
            height: 150px;
            background: var(--secondary);
            border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
            top: 80%;

            
            right: 10%;
            animation-delay: -10s;
        }

        .shape-3 {
            width: 100px;
            height: 100px;
            background: var(--accent);
            border-radius: 50%;
            top: 50%;
            left: 80%;
            animation-delay: -20s;
        }

    
        .gradient-orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(40px);
            opacity: 0.15;
            animation: pulse 8s ease-in-out infinite;
        }

        .orb-1 {
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, var(--secondary), transparent);
            top: 10%;
            left: 70%;
            animation-delay: 0s;
        }

        .orb-2 {
            width: 250px;
            height: 250px;
            background: radial-gradient(circle, var(--primary), transparent);
            top: 60%;
            left: 10%;
            animation-delay: -4s;
        }

        .orb-3 {
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, var(--accent), transparent);
            top: 30%;
            left: 40%;
            animation-delay: -2s;
        }

    
        .grid-pattern {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(99, 102, 241, 0.04) 1px, transparent 1px),
                linear-gradient(90deg, rgba(99, 102, 241, 0.04) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: gridMove 20s linear infinite;
        }

    
        @keyframes float {
            0% {
                transform: translateY(0px) rotate(0deg);
                opacity: 0.15;
            }
            25% {
                opacity: 0.4;
            }
            50% {
                transform: translateY(-120px) rotate(180deg);
                opacity: 0.15;
            }
            75% {
                opacity: 0.4;
            }
            100% {
                transform: translateY(0px) rotate(360deg);
                opacity: 0.15;
            }
        }

        @keyframes rotate {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                opacity: 0.15;
            }
            50% {
                transform: scale(1.3);
                opacity: 0.25;
            }
        }

        @keyframes gridMove {
            0% {
                transform: translate(0, 0);
            }
            100% {
                transform: translate(50px, 50px);
            }
        }
        
    
        .particle {
            will-change: transform;
        }
        
        .animated-shape {
            will-change: transform;
        }
        
        .gradient-orb {
            will-change: transform;
        }
        
        .floating-element {
            will-change: transform;
        }

    
        .floating-element {
            position: absolute;
            opacity: 0.1;
            animation: floatElement 15s ease-in-out infinite;
            filter: blur(1px);
        }

        .float-1 {
            width: 60px;
            height: 60px;
            background: var(--secondary);
            border-radius: 50%;
            top: 25%;
            left: 85%;
            animation-delay: 0s;
        }

        .float-2 {
            width: 40px;
            height: 40px;
            background: var(--primary);
            border-radius: 50%;
            top: 75%;
            left: 15%;
            animation-delay: -7s;
        }

        .float-3 {
            width: 80px;
            height: 80px;
            background: var(--accent);
            border-radius: 50%;
            top: 45%;
            left: 90%;
            animation-delay: -3s;
        }
        
        .float-4 {
            width: 50px;
            height: 50px;
            background: var(--primary);
            border-radius: 50%;
            top: 85%;
            left: 60%;
            animation-delay: -5s;
        }
        
        .float-5 {
            width: 70px;
            height: 70px;
            background: var(--secondary);
            border-radius: 50%;
            top: 15%;
            left: 30%;
            animation-delay: -8s;
        }
        
        .float-6 {
            width: 45px;
            height: 45px;
            background: var(--accent);
            border-radius: 50%;
            top: 65%;
            left: 75%;
            animation-delay: -12s;
        }

        @keyframes floatElement {
            0%, 100% {
                transform: translateY(0px) scale(1);
                opacity: 0.1;
            }
            33% {
                transform: translateY(-40px) scale(1.2);
                opacity: 0.15;
            }
            66% {
                transform: translateY(-20px) scale(0.8);
                opacity: 0.1;
            }
        }

        
        .wave-container {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100px;
            overflow: hidden;
        }

        .wave {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 200%;
            height: 100%;
            background: linear-gradient(45deg, rgba(99, 102, 241, 0.03), rgba(10, 37, 64, 0.03));
            border-radius: 50% 50% 0 0;
            animation: wave 10s ease-in-out infinite;
        }

        .wave:nth-child(2) {
            animation-delay: -5s;
            opacity: 0.5;
        }

        @keyframes wave {
            0%, 100% {
                transform: translateX(-50%) translateY(0);
            }
            50% {
                transform: translateX(-50%) translateY(-20px);
            }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            position: relative;
            z-index: 1;
        }

        
        .navbar {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            position: fixed;
            width: 100%;
            z-index: 1000;
            padding: 1rem 0;
            transition: all 0.3s ease;
            border-bottom: 1px solid var(--lighter-gray);
        }

        .navbar.scrolled {
            padding: 0.75rem 0;
            box-shadow: var(--shadow-lg);
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.75rem;
            font-weight: 900;
            color: var(--primary);
            text-decoration: none;
        }

        .logo i {
            font-size: 2rem;
            color: var(--secondary);
        }
        
        .logo-img {
            height: 45px;
            width: auto;
            transition: transform 0.3s ease;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
        }
        
        .logo:hover .logo-img {
            transform: scale(1.05);
        }
        
        
        @media (max-width: 768px) {
            .logo-img {
                height: 35px;
            }
        }
        
        @media (max-width: 480px) {
            .hero-content {
                padding: 2rem 1.5rem;
                margin: 1rem;
                border-radius: 15px;
            }
            
            .hero-content h1, .hero-content h4 {
                font-size: 2rem;
                margin-bottom: 1rem;
            }
            
            .hero-content p {
                font-size: 1rem;
                margin-bottom: 2rem;
            }
            
            .logo-img {
                width: 100px;
                height: auto;
                margin-bottom: 1.5rem;
            }
            
            .cta-buttons {
                flex-direction: column;
                gap: 1rem;
            }
            
            .btn {
                padding: 1rem 2rem;
                font-size: 1rem;
                justify-content: center;
            }
        }

        .nav-links {
            display: flex;
            gap: 2.5rem;
            list-style: none;
            align-items: center;
        }

        .nav-links a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            position: relative;
            padding: 0.5rem 0;
        }

        .nav-links a:hover {
            color: var(--secondary);
        }

        .nav-cta {
            background: var(--secondary);
            color: var(--light);
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .nav-cta:hover {
            background: var(--accent);
            transform: translateY(-1px);
        }

        .nav-client-access {
            background: var(--success);
            color: var(--light);
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-client-access i {
            font-size: 1rem;
        }

        .nav-client-access:hover {
            background: #059669;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

     
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            position: relative;
            overflow: hidden;
            padding-top: 100px;
            background: linear-gradient(135deg, rgba(10, 37, 64, 0.85) 0%, rgba(30, 58, 138, 0.8) 50%, rgba(99, 102, 241, 0.75) 100%), url('https://wallpaperaccess.com/full/1124709.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(10, 37, 64, 0.1) 0%, transparent 50%, rgba(99, 102, 241, 0.1) 100%);
            pointer-events: none;
        }

        .hero-content {
            max-width: 700px;
            z-index: 2;
            position: relative;
            background: rgba(255, 255, 255, 0.95);
            padding: 3rem;
            border-radius: 20px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .logo-img {
            width: 120px;
            height: auto;
            margin-bottom: 2rem;
            display: block;
        }

        .hero h1, .hero h4 {
            font-size: clamp(2.5rem, 5vw, 3.5rem);
            font-weight: 800;
            margin-bottom: 1.5rem;
            line-height: 1.2;
            color: var(--primary);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .hero h1 span, .hero h4 span {
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            position: relative;
        }

        .hero h1 span::after, .hero h4 span::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--gradient);
            border-radius: 2px;
        }

        .hero p {
            font-size: 1.2rem;
            margin-bottom: 2.5rem;
            color: var(--dark-gray);
            line-height: 1.8;
            font-weight: 500;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }

        .cta-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .btn {
            padding: 1.2rem 2.5rem;
            border-radius: 12px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.1rem;
            border: none;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        .btn:hover {
            transform: translateY(-3px) scale(1.03);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: var(--primary);
            color: var(--light);
        }

        .btn-primary:hover {
            background: var(--primary-light);
        }

        .btn-secondary {
            background: var(--light);
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-secondary:hover {
            background: var(--primary);
            color: var(--light);
        }

     
        .features {
            padding: 6rem 0;
            background: var(--light);
            position: relative;
        }

        .section-title {
            text-align: center;
            margin-bottom: 4rem;
        }

        .section-title h2 {
            font-size: clamp(2.5rem, 5vw, 3.5rem);
            margin-bottom: 1rem;
            font-weight: 800;
            color: var(--primary);
        }

        .section-title p {
            font-size: 1.25rem;
            color: var(--gray);
            max-width: 600px;
            margin: 0 auto;
            font-weight: 400;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
        }

        .feature-card {
            background: var(--light);
            border-radius: 16px;
            padding: 2.5rem;
            transition: all 0.3s ease;
            border: 1px solid var(--lighter-gray);
            position: relative;
            overflow: hidden;
        }

        .feature-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: var(--shadow-xl);
            border-color: var(--secondary);
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.05), rgba(10, 37, 64, 0.05));
            border-radius: 16px;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
        }

        .feature-card:hover::before {
            opacity: 1;
        }

        .feature-icon {
            width: 60px;
            height: 60px;
            background: var(--gradient-light);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
            color: var(--secondary);
            transition: all 0.3s ease;
        }

        .feature-card:hover .feature-icon {
            background: var(--gradient);
            color: var(--light);
            transform: scale(1.1);
        }

        .feature-card h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            font-weight: 700;
            color: var(--primary);
        }

        .feature-card p {
            color: var(--gray);
            line-height: 1.6;
            font-weight: 400;
        }

        
        .stats {
            padding: 4rem 0;
            background: var(--primary);
            color: var(--light);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 3rem;
            text-align: center;
        }

        .stat-item {
            position: relative;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-item:hover {
            transform: translateY(-5px);
        }

        .stat-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 1rem;
            border-radius: 50%;
            overflow: hidden;
            border: 3px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .stat-item:hover .stat-icon {
            border-color: rgba(255, 255, 255, 0.4);
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .stat-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: all 0.3s ease;
        }

        .stat-item:hover .stat-icon img {
            transform: scale(1.1);
        }

        .stat-item h3 {
            font-size: 3rem;
            font-weight: 900;
            margin-bottom: 0.5rem;
            color: var(--light);
            transition: all 0.3s ease;
            display: inline-block;
        }

        .stat-item h3.animate {
            animation: numberPulse 0.6s ease-out;
        }

        @keyframes numberPulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.2);
            }
            100% {
                transform: scale(1);
            }
        }

        .stat-item p {
            font-size: 1.1rem;
            color: var(--light-gray);
            font-weight: 500;
        }

     
        .how-it-works {
            padding: 6rem 0;
            background: var(--off-white);
            position: relative;
        }

        .how-it-works h1 {
            text-align: center;
            font-size: clamp(2.5rem, 5vw, 3.5rem);
            margin-bottom: 1rem;
            font-weight: 800;
            color: var(--primary);
        }

        .how-it-works .subtitle {
            text-align: center;
            color: var(--gray);
            margin-bottom: 3rem;
            font-size: 1.25rem;
            font-weight: 400;
        }

        .tabs {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 3rem;
            flex-wrap: wrap;
        }

        .tab {
            padding: 1rem 2rem;
            border: 2px solid var(--lighter-gray);
            background: var(--light);
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 1rem;
            color: var(--primary);
        }

        .tab:hover {
            border-color: var(--secondary);
            color: var(--secondary);
        }

        .tab.active {
            background: var(--primary);
            color: var(--light);
            border-color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeInUp 0.5s ease;
        }

        .tab-content.active .steps-img {
            animation: imageSlideIn 0.6s ease-out;
        }

        @keyframes imageSlideIn {
            0% {
                opacity: 0;
                transform: translateX(30px) scale(0.95);
            }
            100% {
                opacity: 1;
                transform: translateX(0) scale(1);
            }
        }

        .steps-img-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: center;
        }

        .steps {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .step {
            display: flex;
            gap: 1.5rem;
            align-items: flex-start;
            padding: 1.5rem;
            background: var(--light);
            border-radius: 12px;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
        }

        .step:hover {
            transform: translateX(8px);
            box-shadow: var(--shadow-lg);
        }

        .step-num {
            width: 50px;
            height: 50px;
            background: var(--gradient);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--light);
            font-weight: 700;
            flex-shrink: 0;
            font-size: 1.1rem;
            transition: all 0.6s ease;
            position: relative;
            overflow: hidden;
        }

        .step-num::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.6s ease;
        }

        .step-num.animate::before {
            left: 100%;
        }

        .step-num.animate {
            animation: stepNumGlow 0.6s ease-out;
        }

        @keyframes stepNumGlow {
            0% {
                transform: scale(1) rotate(0deg);
                box-shadow: 0 0 0 rgba(99, 102, 241, 0);
            }
            50% {
                transform: scale(1.3) rotate(180deg);
                box-shadow: 0 0 20px rgba(99, 102, 241, 0.5);
            }
            100% {
                transform: scale(1) rotate(360deg);
                box-shadow: 0 0 0 rgba(99, 102, 241, 0);
            }
        }

        
        .number-highlight {
            animation: numberHighlight 1s ease-out;
        }

        @keyframes numberHighlight {
            0% {
                transform: scale(1);
                color: inherit;
            }
            25% {
                transform: scale(1.05);
                color: var(--secondary);
            }
            50% {
                transform: scale(1.1);
                color: var(--secondary);
            }
            75% {
                transform: scale(1.05);
                color: var(--secondary);
            }
            100% {
                transform: scale(1);
                color: inherit;
            }
        }

    
        .feature-card h3.number-highlight,
        .step-title.number-highlight {
            animation: featureNumberHighlight 1s ease-out;
        }

        @keyframes featureNumberHighlight {
            0% {
                transform: scale(1);
                color: inherit;
            }
            50% {
                transform: scale(1.1);
                color: var(--secondary);
                text-shadow: 0 0 10px rgba(99, 102, 241, 0.3);
            }
            100% {
                transform: scale(1);
                color: inherit;
            }
        }

        .step-title {
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--primary);
            font-size: 1.1rem;
        }

        .step-desc {
            color: var(--gray);
            font-size: 0.95rem;
            line-height: 1.6;
            font-weight: 400;
        }

        .steps-img {
            width: 100%;
            min-height: 450px;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--shadow-xl);
            position: relative;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border: 3px solid var(--light);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .steps-img::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(10, 37, 64, 0.1));
            z-index: 1;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .steps-img:hover::before {
            opacity: 1;
        }

        .steps-img img {
            width: 100%;
            max-height: 400px;
            object-fit: contain;
            border-radius: 16px;
            transition: all 0.4s ease;
            filter: brightness(0.95) contrast(1.05);
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            display: block !important;
            opacity: 1 !important;
            visibility: visible !important;
        }

        .steps-img:hover img {
            transform: translateY(-5px) scale(1.02);
            filter: brightness(1.05) contrast(1.1);
            box-shadow: 0 12px 40px rgba(0,0,0,0.15);
        }

        .steps-img::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: linear-gradient(to top, rgba(0,0,0,0.3), transparent);
            z-index: 2;
        }

        .image-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 3;
            pointer-events: none;
        }

        .overlay-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 0.75rem 1.25rem;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 4px 20px rgba(16, 185, 129, 0.3);
            animation: badgeFloat 3s ease-in-out infinite;
        }

        @keyframes badgeFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
        }

        .overlay-badge i {
            font-size: 1rem;
        }

        
        .steps-img::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 20px;
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: pulse 2s infinite;
            z-index: 3;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
                opacity: 0.7;
            }
            50% {
                transform: scale(1.2);
                opacity: 0.3;
            }
            100% {
                transform: scale(1);
                opacity: 0.7;
            }
        }
        
        
        @media (max-width: 768px) {
            .steps-img img {
                max-width: 300px;
                margin: 0 auto;
                display: block;
            }
            
            .steps-img-row {
                flex-direction: column;
                gap: 2rem;
            }
            
            .steps {
                order: 2;
            }
            
            .steps-img {
                order: 1;
            }
        }

        
        .steps-img::after {
            content: '';
            position: absolute;
            bottom: 40px;
            left: 40px;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            animation: float 3s ease-in-out infinite;
            z-index: 3;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0px) rotate(0deg);
            }
            50% {
                transform: translateY(-10px) rotate(5deg);
            }
        }

    
        #electronic-visa .steps-img::before {
            background: linear-gradient(45deg, rgba(99, 102, 241, 0.2), rgba(16, 185, 129, 0.2));
            border-radius: 50%;
        }

        #visa-arrival .steps-img::before {
            background: linear-gradient(45deg, rgba(245, 147, 32, 0.2), rgba(234, 88, 12, 0.2));
            border-radius: 8px;
        }

        #health-declaration .steps-img::before {
            background: linear-gradient(45deg, rgba(236, 72, 153, 0.2), rgba(220, 38, 38, 0.2));
            border-radius: 4px;
        }

        #guided-visa .steps-img::before {
            background: linear-gradient(45deg, rgba(139, 92, 246, 0.2), rgba(55, 115, 247, 0.2));
            border-radius: 12px;
        }

        
        .steps-img {
            position: relative;
        }

        .steps-img::after {
            content: '';
            position: absolute;
            top: 50%;
            right: 30px;
            width: 20px;
            height: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }

        
        .steps-img img {
            min-height: 200px;
            background: linear-gradient(135deg, #f1f5f9, #e2e8f0);
        }

        .steps-img img:not([src]) {
            display: flex;
            align-items: center;
            justify-content: center;
            color: #64748b;
            font-size: 1.1rem;
            font-weight: 500;
        }

        .steps-img img:not([src])::before {
            content: 'Loading image...';
        }

      
        .process {
            padding: 6rem 0;
            background: var(--light);
            position: relative;
        }

        .process-steps {
            display: flex;
            flex-direction: column;
            gap: 2rem;
            max-width: 800px;
            margin: 0 auto;
        }

        .process-step {
            display: flex;
            gap: 2rem;
            align-items: flex-start;
            background: var(--off-white);
            padding: 2.5rem;
            border-radius: 16px;
            transition: all 0.3s ease;
            border: 1px solid var(--lighter-gray);
        }

        .process-step:hover {
            transform: translateX(10px);
            box-shadow: var(--shadow-lg);
            border-color: var(--secondary);
        }

        .step-number {
            width: 60px;
            height: 60px;
            background: var(--gradient);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            flex-shrink: 0;
            color: var(--light);
            font-size: 1.25rem;
            transition: all 0.6s ease;
            position: relative;
            overflow: hidden;
        }

        .step-number::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.6s ease;
        }

        .step-number.animate::before {
            left: 100%;
        }

        .step-number.animate {
            animation: stepNumberGlow 0.6s ease-out;
        }

        @keyframes stepNumberGlow {
            0% {
                transform: scale(1) rotate(0deg);
                box-shadow: 0 0 0 rgba(99, 102, 241, 0);
            }
            50% {
                transform: scale(1.3) rotate(180deg);
                box-shadow: 0 0 20px rgba(99, 102, 241, 0.5);
            }
            100% {
                transform: scale(1) rotate(360deg);
                box-shadow: 0 0 0 rgba(99, 102, 241, 0);
            }
        }

        .step-content h3 {
            margin-bottom: 0.75rem;
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--primary);
        }

        .step-content p {
            color: var(--gray);
            line-height: 1.6;
            font-weight: 400;
        }

       
        .contact {
            padding: 6rem 0;
            background: var(--off-white);
            position: relative;
        }

        .contact-form {
            max-width: 600px;
            margin: 0 auto;
            background: var(--light);
            padding: 3rem;
            border-radius: 16px;
            box-shadow: var(--shadow-xl);
            border: 1px solid var(--lighter-gray);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--primary);
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 1rem;
            background: var(--off-white);
            border: 2px solid var(--lighter-gray);
            border-radius: 8px;
            color: var(--primary);
            font-family: inherit;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .footer {
            background: var(--primary);
            padding: 4rem 0 2rem;
            color: var(--light);
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 3rem;
            margin-bottom: 2rem;
        }

        .footer-column h3 {
            margin-bottom: 1.5rem;
            color: var(--light);
            font-weight: 700;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 0.8rem;
        }

        .footer-links a {
            color: var(--light-gray);
            text-decoration: none;
            transition: color 0.3s ease;
            font-weight: 400;
        }

        .footer-links a:hover {
            color: var(--light);
        }

        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .social-links a {
            width: 45px;
            height: 45px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--light);
            transition: all 0.3s ease;
        }

        .social-links a:hover {
            background: var(--secondary);
            transform: translateY(-3px);
        }


        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        
        @media (max-width: 768px) {
            .container {
                padding: 0 1rem;
            }
            
            .nav-links {
                display: none;
            }
            
            .steps-img-row {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
            
            .steps-img {
                height: 300px;
            }
            
            .cta-buttons {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
            
            .contact-form {
                padding: 2rem;
                margin: 0 1rem;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 2rem;
            }
        }

        @media (max-width: 480px) {
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
            
            .section-title h2 {
                font-size: 2rem;
            }
            
            .feature-card {
                padding: 2rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }

        
        .hero-content {
            animation: fadeInUp 1s ease-out;
        }

        .hero h1 {
            animation: slideInLeft 1.2s ease-out 0.3s both;
        }

        .hero p {
            animation: slideInLeft 1.2s ease-out 0.6s both;
        }

        .cta-buttons {
            animation: slideInLeft 1.2s ease-out 0.9s both;
        }

        .hero-buttons-row {
            animation: slideInLeft 1.2s ease-out 1.2s both;
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        
        .particle {
            will-change: transform;
        }

        .gradient-orb {
            will-change: transform, opacity;
        }

        
        html {
            scroll-behavior: smooth;
        }

    
        .btn:focus,
        .modern-hero-btn:focus,
        .tab:focus {
            outline: 2px solid var(--secondary);
            outline-offset: 2px;
        }

        
        .loading {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease;
        }

        .loading.loaded {
            opacity: 1;
            transform: translateY(0);
        }


        .hero-buttons-row {
            display: flex;
            gap: 1.5rem;
            margin-top: 2.5rem;
            flex-wrap: wrap;
        }

        .modern-hero-btn {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1.25rem 2rem;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            background: var(--light);
            color: var(--primary);
            box-shadow: var(--shadow);
            border: 2px solid var(--lighter-gray);
            min-width: 280px;
            justify-content: center;
        }

        .modern-hero-btn:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .modern-hero-btn.primary {
            background: var(--primary);
            color: var(--light);
            border-color: var(--primary);
        }

        .modern-hero-btn.primary:hover {
            background: var(--primary-light);
            transform: translatey(-4px);
        }

        .modern-hero-btn:not(.primary):hover {
            border-color: var(--secondary);
            background: var(--off-white);
            color: var(--secondary);
        }

        .modern-hero-btn i {
            font-size: 1.3rem;
            transition: transform 0.3s ease;
        }

        .modern-hero-btn:hover i {
            transform: scale(1.1);
        }

       
        @media (max-width: 768px) {
            .hero-buttons-row {
                flex-direction: column;
                gap: 1rem;
                align-items: stretch;
            }
            
            .modern-hero-btn {
                min-width: unset;
                width: 100%;
                padding: 1.1rem 1.5rem;
                font-size: 1rem;
            }
        }

        @media (max-width: 480px) {
            .modern-hero-btn {
                padding: 1rem 1.25rem;
                font-size: 0.95rem;
            }
            
            .modern-hero-btn i {
                font-size: 1.1rem;
            }
        }

        
        .chat-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(10, 37, 64, 0.95), rgba(30, 58, 138, 0.95));
            backdrop-filter: blur(20px);
            z-index: 10000;
            animation: modalFadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .chat-modal.active {
            display: flex;
            align-items: stretch;
            justify-content: stretch;
        }

        .chat-container {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 0;
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            border: none;
            overflow: hidden;
            position: relative;
        }

        .chat-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(99, 102, 241, 0.3), transparent);
        }

        .chat-header {
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            color: #ffffff;
            padding: 1.5rem 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .chat-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(99, 102, 241, 0.15), rgba(16, 185, 129, 0.15));
            pointer-events: none;
        }

        .chat-header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        }

        .chat-header h3 {
            font-size: 1.1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            letter-spacing: 0.025em;
        }

        .chat-header h3 i {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .chat-header .close-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #ffffff;
            width: 36px;
            height: 36px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            backdrop-filter: blur(10px);
        }

        .chat-header .close-btn:hover {
            background: rgba(239, 68, 68, 0.2);
            border-color: rgba(239, 68, 68, 0.4);
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
        }

        .chat-body {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 50%, #f1f5f9 100%);
            position: relative;
            scroll-behavior: smooth;
        }

        .chat-body::-webkit-scrollbar {
            width: 6px;
        }

        .chat-body::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
            border-radius: 3px;
        }

        .chat-body::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border-radius: 3px;
        }

        .chat-body::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
        }

        .chat-body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse"><path d="M 20 0 L 0 0 0 20" fill="none" stroke="%23e2e8f0" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            opacity: 0.3;
            pointer-events: none;
        }

        .chat-messages {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            position: relative;
            z-index: 1;
        }

        .message {
            display: flex;
            gap: 1rem;
            animation: messageSlideIn 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            margin-bottom: 1.5rem;
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 42px;
            height: 42px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            flex-shrink: 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.8);
        }

        .message.bot .message-avatar {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: #ffffff;
        }

        .message.user .message-avatar {
            background: linear-gradient(135deg, #10b981, #059669);
            color: #ffffff;
        }

        .message-content {
            max-width: 75%;
            padding: 1.25rem 1.5rem;
            border-radius: 20px;
            position: relative;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            backdrop-filter: blur(10px);
        }

        .message.bot .message-content {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(226, 232, 240, 0.8);
            color: #1e293b;
        }

        .message.user .message-content {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: #ffffff;
            border: none;
        }

        .message-text {
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 0.5rem;
        }

        .message-options {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin-top: 1rem;
        }

        .option-btn {
            background: rgba(255, 255, 255, 0.8);
            border: 2px solid rgba(226, 232, 240, 0.8);
            border-radius: 16px;
            padding: 1rem 1.25rem;
            color: #1e293b;
            font-size: 0.95rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: left;
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            position: relative;
            overflow: hidden;
        }

        .option-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.5s;
        }

        .option-btn:hover::before {
            left: 100%;
        }

        .option-btn:hover {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: #ffffff;
            border-color: #6366f1;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.3);
        }

        .option-btn.selected {
            background: linear-gradient(135deg, #10b981, #059669);
            color: #ffffff;
            border-color: #10b981;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }

        .input-field {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--lighter-gray);
            border-radius: 12px;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s ease;
            margin-top: 0.5rem;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .progress-bar {
            position: absolute;
            top: 0;
            left: 0;
            height: 3px;
            background: linear-gradient(90deg, #6366f1, #8b5cf6, #ec4899);
            transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 0 0 3px 0;
            box-shadow: 0 2px 8px rgba(99, 102, 241, 0.3);
        }

        .step-indicator {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(255, 255, 255, 0.15);
            color: #ffffff;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            font-size: 0.8rem;
            font-weight: 600;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            letter-spacing: 0.025em;
        }

        .package-display {
            background: var(--gradient-light);
            border: 2px solid var(--secondary);
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 1rem;
        }

        .package-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .package-price {
            font-size: 1.5rem;
            font-weight: 900;
            color: var(--secondary);
            margin-bottom: 0.5rem;
        }

        .package-features {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .package-features li {
            padding: 0.25rem 0;
            color: var(--gray);
            font-size: 0.9rem;
        }

        .package-features li::before {
            content: '';
            color: var(--success);
            font-weight: bold;
            margin-right: 0.5rem;
        }

        .credits-display {
            background: var(--accent);
            color: var(--light);
            padding: 1rem;
            border-radius: 12px;
            text-align: center;
            margin-top: 1rem;
        }

        .credits-amount {
            font-size: 2rem;
            font-weight: 900;
            margin-bottom: 0.5rem;
        }

        .purchase-form {
            background: var(--light);
            border: 1px solid var(--lighter-gray);
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 1rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .form-row.full {
            grid-template-columns: 1fr;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--primary);
            font-size: 0.9rem;
        }

        .form-group input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--lighter-gray);
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .action-btn {
            flex: 1;
            padding: 1rem;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .action-btn.primary {
            background: var(--primary);
            color: var(--light);
        }

        .action-btn.primary:hover {
            background: var(--primary-light);
            transform: translateY(-2px);
        }

        .action-btn.secondary {
            background: var(--light);
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .action-btn.secondary:hover {
            background: var(--primary);
            color: var(--light);
        }

        .typing-indicator {
            display: flex;
            gap: 0.25rem;
            padding: 1rem;
            align-items: center;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--gray);
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }

        @keyframes typing {
            0%, 80%, 100% {
                transform: scale(0.8);
                opacity: 0.5;
            }
            40% {
                transform: scale(1);
                opacity: 1;
            }
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes messageSlideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

     
        @media (max-width: 1200px) {
            .chat-container {
                width: 100%;
                height: 100vh;
                border-radius: 0;
            }
        }
        @media (max-width: 900px) {
            .chat-container {
                width: 100%;
                height: 100vh;
                border-radius: 0;
            }
            .chat-header, .chat-body {
                padding: 1.2rem 1rem;
            }
        }
        @media (max-width: 600px) {
            .chat-container {
                width: 100%;
                height: 100vh;
                border-radius: 0;
            }
            .chat-header, .chat-body {
                padding: 0.7rem 0.5rem;
            }
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
                opacity: 0.4;
            }
            30% {
                transform: translateY(-10px);
                opacity: 1;
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes messageSlideIn {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                backdrop-filter: blur(0px);
            }
            to {
                opacity: 1;
                backdrop-filter: blur(20px);
            }
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.05);
                opacity: 0.8;
            }
        }

        .message {
            animation: messageSlideIn 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .typing-indicator {
            animation: pulse 2s infinite;
        }

        .option-btn:hover {
            background: linear-gradient(135deg, #6366f1, #4f46e5) !important;
            color: white !important;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(99,102,241,0.3) !important;
        }

        .option-btn.selected {
            background: linear-gradient(135deg, #10b981, #059669) !important;
            color: white !important;
            border-color: #10b981 !important;
        }
        @media (min-width: 1200px) {
            .container {
                max-width: 1400px;
                padding: 0 2rem;
            }
            
            .hero-content h1 {
                font-size: 4.5rem;
                line-height: 1.1;
            }
            
            .hero-content p {
                font-size: 1.4rem;
                max-width: 600px;
            }
            
            .features-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 3rem;
            }
            
            .steps-img-row {
                gap: 6rem;
            }
            
            .stats-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 3rem;
            }
            
            .chat-container {
                max-width: 1200px;
                margin: 0 auto;
                height: 90vh;
                border-radius: 20px;
            }
        }
        
        
        @media (min-width: 992px) and (max-width: 1199px) {
            .container {
                max-width: 1200px;
                padding: 0 2rem;
            }
            
            .hero-content h1 {
                font-size: 3.8rem;
            }
            
            .hero-content p {
                font-size: 1.3rem;
                max-width: 550px;
            }
            
            .features-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 2.5rem;
            }
            
            .steps-img-row {
                gap: 4rem;
            }
            
            .chat-container {
                max-width: 1000px;
                margin: 0 auto;
                height: 85vh;
                border-radius: 15px;
            }
        }
        
        
        @media (min-width: 768px) and (max-width: 991px) {
            .container {
                padding: 0 1.5rem;
            }
            
            .hero-content h1 {
                font-size: 3.2rem;
            }
            
            .hero-content p {
                font-size: 1.2rem;
                max-width: 500px;
            }
            
            .features-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 2rem;
            }
            
            .steps-img-row {
                grid-template-columns: 1fr;
                gap: 3rem;
            }
            
            .steps-img {
                max-width: 500px;
                margin: 0 auto;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 2rem;
            }
            
            .nav-links {
                gap: 1.5rem;
            }
            
            .nav-links a {
                font-size: 0.9rem;
            }
            
            .chat-container {
                max-width: 800px;
                margin: 0 auto;
                height: 80vh;
                border-radius: 12px;
            }
        }
        
        
        @media (min-width: 576px) and (max-width: 767px) {
            .container {
                padding: 0 1rem;
            }
            
            .hero-content h1 {
                font-size: 2.8rem;
                line-height: 1.2;
            }
            
            .hero-content p {
                font-size: 1.1rem;
                margin-bottom: 2rem;
            }
            
            .hero-buttons {
                flex-direction: column;
                gap: 1rem;
                align-items: center;
            }
            
            .hero-buttons .btn {
                width: 100%;
                max-width: 300px;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .feature-card {
                padding: 1.5rem;
            }
            
            .steps-img-row {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
            
            .steps-img {
                min-height: 350px;
            }
            
            .steps-img img {
                max-height: 300px;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 1.5rem;
            }
            
            .stat-item {
                padding: 1.5rem 1rem;
            }
            
            .tabs {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .tab {
                width: 100%;
                text-align: center;
                padding: 1rem;
            }
            
            .nav-links {
                display: none;
            }
            
            .chat-container {
                border-radius: 0;
                height: 100vh;
            }
            
            .chat-header {
                padding: 1rem 1.5rem;
            }
            
            .chat-body {
                padding: 1rem;
            }
        }
        
    
        @media (min-width: 480px) and (max-width: 575px) {
            .hero-content h1 {
                font-size: 2.4rem;
            }
            
            .hero-content p {
                font-size: 1rem;
            }
            
            .feature-card {
                padding: 1.25rem;
            }
            
            .feature-card h3 {
                font-size: 1.3rem;
            }
            
            .feature-card p {
                font-size: 0.95rem;
            }
            
            .steps-img {
                min-height: 300px;
            }
            
            .steps-img img {
                max-height: 250px;
            }
            
            .step {
                padding: 1.25rem;
                gap: 1rem;
            }
            
            .step-num {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }
            
            .step-title {
                font-size: 1.1rem;
            }
            
            .step-desc {
                font-size: 0.9rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .stat-item h3 {
                font-size: 2rem;
            }
            
            .stat-item p {
                font-size: 0.9rem;
            }
            
            .section-title h2 {
                font-size: 2.2rem;
            }
            
            .section-title p {
                font-size: 1rem;
            }
        }
        
    
        @media (max-width: 479px) {
            .container {
                padding: 0 0.75rem;
            }
            
            .hero-content h1 {
                font-size: 2rem;
                line-height: 1.3;
            }
            
            .hero-content p {
                font-size: 0.95rem;
                margin-bottom: 1.5rem;
            }
            
            .hero-buttons .btn {
                padding: 0.875rem 1.5rem;
                font-size: 0.95rem;
            }
            
            .section-title h2 {
                font-size: 1.8rem;
            }
            
            .section-title p {
                font-size: 0.95rem;
            }
            
            .feature-card {
                padding: 1rem;
            }
            
            .feature-card h3 {
                font-size: 1.2rem;
            }
            
            .feature-card p {
                font-size: 0.9rem;
            }
            
            .feature-icon {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }
            
            .steps-img {
                min-height: 250px;
            }
            
            .steps-img img {
                max-height: 200px;
            }
            
            .step {
                padding: 1rem;
                gap: 0.75rem;
            }
            
            .step-num {
                width: 35px;
                height: 35px;
                font-size: 0.9rem;
            }
            
            .step-title {
                font-size: 1rem;
            }
            
            .step-desc {
                font-size: 0.85rem;
            }
            
            .tabs {
                gap: 0.25rem;
            }
            
            .tab {
                padding: 0.75rem 0.5rem;
                font-size: 0.9rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 0.75rem;
            }
            
            .stat-item {
                padding: 1rem 0.75rem;
            }
            
            .stat-item h3 {
                font-size: 1.8rem;
            }
            
            .stat-item p {
                font-size: 0.85rem;
            }
            
            .stat-icon {
                width: 50px;
                height: 50px;
            }
            
            .stat-icon img {
                width: 30px;
                height: 30px;
            }
            
            .chat-header {
                padding: 0.75rem 1rem;
            }
            
            .chat-header h3 {
                font-size: 1.1rem;
            }
            
            .chat-body {
                padding: 0.75rem;
            }
            
            .chat-input-container {
                padding: 0.75rem;
            }
            
            .chat-input {
                padding: 0.75rem;
                font-size: 0.9rem;
            }
            
            .send-btn {
                padding: 0.75rem;
                font-size: 1rem;
            }
        }
        
        
        @media (max-width: 319px) {
            .container {
                padding: 0 0.5rem;
            }
            
            .hero-content h1 {
                font-size: 1.8rem;
            }
            
            .hero-content p {
                font-size: 0.9rem;
            }
            
            .hero-buttons .btn {
                padding: 0.75rem 1.25rem;
                font-size: 0.9rem;
            }
            
            .feature-card {
                padding: 0.75rem;
            }
            
            .feature-card h3 {
                font-size: 1.1rem;
            }
            
            .feature-card p {
                font-size: 0.85rem;
            }
            
            .step {
                padding: 0.75rem;
            }
            
            .step-num {
                width: 30px;
                height: 30px;
                font-size: 0.8rem;
            }
            
            .step-title {
                font-size: 0.95rem;
            }
            
            .step-desc {
                font-size: 0.8rem;
            }
            
            .tab {
                padding: 0.5rem 0.25rem;
                font-size: 0.85rem;
            }
            
            .chat-header {
                padding: 0.5rem 0.75rem;
            }
            
            .chat-header h3 {
                font-size: 1rem;
            }
            
            .chat-body {
                padding: 0.5rem;
            }
            
            .chat-input-container {
                padding: 0.5rem;
            }
            
            .chat-input {
                padding: 0.5rem;
                font-size: 0.85rem;
            }
            
            .send-btn {
                padding: 0.5rem;
                font-size: 0.9rem;
            }
        }
        
        
        @media (max-width: 767px) and (orientation: landscape) {
            .hero-content {
                padding: 2rem;
                margin: 1rem;
            }
            
            .hero-content h1, .hero-content h4 {
                font-size: 2.2rem;
            }
            
            .hero-content p {
                font-size: 1rem;
            }
            
            .features-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }
            
            .steps-img-row {
                grid-template-columns: 1fr 1fr;
                gap: 1.5rem;
            }
            
            .steps-img {
                min-height: 200px;
            }
            
            .stats-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 1rem;
            }
            
            .hero {
                min-height: 80vh;
                padding-top: 80px;
            }
        }
        
       
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
            .steps-img img {
                image-rendering: -webkit-optimize-contrast;
                image-rendering: crisp-edges;
            }
            
            .logo-img {
                image-rendering: -webkit-optimize-contrast;
                image-rendering: crisp-edges;
            }
        }
        
      
        @media print {
            .background-animations,
            .chat-modal,
            .hero-buttons,
            .nav-cta {
                display: none !important;
            }
            
            .container {
                max-width: none;
                padding: 0;
            }
            
            .hero-content,
            .features,
            .how-it-works,
            .stats {
                page-break-inside: avoid;
            }
            
            .hero {
                min-height: auto;
                padding: 2rem 0;
            }
            
            .hero-content h1 {
                font-size: 2rem;
                color: #000 !important;
            }
            
            .hero-content p {
                font-size: 1rem;
                color: #333 !important;
            }
        }
        

        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            
            .background-animations {
                display: none !important;
            }
        }
        
    
        @media (prefers-color-scheme: dark) {
            :root {
                --light: #1a1a1a;
                --gray: #a0a0a0;
                --primary: #6366f1;
                --secondary: #10b981;
            }
            
            .hero {
                background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 100%);
            }
            
            .feature-card {
                background: #2a2a2a;
                border: 1px solid #333;
            }
            
            .step {
                background: #2a2a2a;
                border: 1px solid #333;
            }
            
            .chat-container {
                background: linear-gradient(135deg, #1a1a1a 0%, #0f0f0f 100%);
                color: #fff;
            }
        }
    </style>
</head>
<body>
    
    
    <div class="background-animations">
    
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        
        
        <div class="animated-shape shape-1"></div>
        <div class="animated-shape shape-2"></div>
        <div class="animated-shape shape-3"></div>
        
        
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
        <div class="grid-pattern"></div>
        <div class="floating-element float-1"></div>
        <div class="floating-element float-2"></div>
        <div class="floating-element float-3"></div>
        <div class="floating-element float-4"></div>
        <div class="floating-element float-5"></div>
        <div class="floating-element float-6"></div>
    </div>

    <nav class="navbar">
        <div class="container nav-container">
            <a href="#" class="logo">
                <img src="https://www.icslegal.com/assets/img/logo-1.svg" alt="ICS LEGAL" class="logo-img">
            </a>
            <ul class="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#services">Visa Types</a></li>
                <li><a href="#process">Application Process</a></li>
                <li><a href="#contact">Contact</a></li>
                <li><a href="client-login.html" class="nav-client-access">
                    <i class="fas fa-user-circle"></i> Client Access
                </a></li>
                <li><a href="#contact" class="nav-cta">Apply Now</a></li>
            </ul>
        </div>
    </nav>

    <section class="hero" id="home">
        <div class="container">
            <div class="hero-content">
                <img src="https://www.icslegal.com/assets/img/logo-1.svg" alt="ICS LEGAL" class="logo-img">
                <h4>Your Gateway to <span>UK Immigration</span></h4>
                <p>Professional UK visa application services with expert guidance. From student visas to work permits, we help you navigate the complex UK immigration process with confidence.</p>
                <div class="cta-buttons">
                    <a href="#contact" class="btn btn-primary">
                        <i class="fas fa-rocket"></i>
                        Start Application
                    </a>
                    <a href="#services" class="btn btn-secondary">
                        <i class="fas fa-info-circle"></i>
                        Learn More
                    </a>
                </div>
                <div class="hero-buttons-row">
                    <button class="modern-hero-btn primary" id="hireGloballyBtn">
                        <i class="fas fa-passport"></i>
                        Apply For UK Visa
                    </button>
                    <button class="modern-hero-btn" id="payrollBtn" onclick="window.location.href='templates_chat.html'">
                        <i class="fas fa-file-alt"></i>
                    Buy Templates and Packages 
                    </button>
                </div>
            </div>
        </div>
        
        <div class="wave-container">
            <div class="wave"></div>
            <div class="wave"></div>
        </div>
    </section>
    <section class="stats">
        <div class="container">
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-icon">
                        <img src="https://images.unsplash.com/photo-1554224155-6726b3ff858f?w=80&h=80&fit=crop&crop=center" alt="Visa Types" loading="lazy">
                    </div>
                    <h3>15+</h3>
                    <p>Visa Types Available</p>
                </div>
                <div class="stat-item">
                    <div class="stat-icon">
                        <img src="https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=80&h=80&fit=crop&crop=center" alt="Successful Applications" loading="lazy">
                    </div>
                    <h3>5,000+</h3>
                    <p>Successful Applications</p>
                </div>
                <div class="stat-item">
                    <div class="stat-icon">
                        <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=80&h=80&fit=crop&crop=center" alt="Approval Rate" loading="lazy">
                    </div>
                    <h3>98%</h3>
                    <p>Approval Rate</p>
                </div>
                <div class="stat-item">
                    <div class="stat-icon">
                        <img src="https://images.unsplash.com/photo-1553877522-43269d4ea984?w=80&h=80&fit=crop&crop=center" alt="Expert Support" loading="lazy">
                    </div>
                    <h3>24/7</h3>
                    <p>Expert Support</p>
                </div>
            </div>
        </div>
    </section>
    <section class="features" id="services">
        <div class="container">
            <div class="section-title">
                <h2>Comprehensive UK Visa Services</h2>
                <p>From application preparation to document verification, we handle every aspect of your UK visa application to ensure success.</p>
            </div>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <h3>Student Visas</h3>
                    <p>Comprehensive support for Tier 4 student visas, including university applications and financial documentation.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-briefcase"></i>
                    </div>
                    <h3>Work Visas</h3>
                    <p>Expert guidance for Skilled Worker visas, Global Talent visas, and other work permit applications.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <h3>Family Visas</h3>
                    <p>Family reunion and partner visa applications with complete document preparation and submission support.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-plane"></i>
                    </div>
                    <h3>Visitor Visas</h3>
                    <p>Tourist, business, and medical visitor visas with quick processing and comprehensive guidance.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-file-alt"></i>
                    </div>
                    <h3>Document Preparation</h3>
                    <p>Professional document review, translation services, and application form completion assistance.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-headset"></i>
                    </div>
                    <h3>24/7 Support</h3>
                    <p>Round-the-clock expert support for all your visa application questions and concerns.</p>
                </div>
            </div>
        </div>
    </section>
    <section class="how-it-works" id="how-it-works">
        <div class="container">
            <h1>How it works</h1>
            <p class="subtitle">Learn more about the process of each kind of Visa we can help you apply for</p>
            <div class="tabs">
                <button class="tab active" data-tab="electronic-visa">Electronic Visa (e-Visa)</button>
                <button class="tab" data-tab="visa-arrival">e-Visa on Arrival</button>
                <button class="tab" data-tab="health-declaration">Health Declaration</button>
                <button class="tab" data-tab="guided-visa">Guided Visa</button>
            </div>
            <div class="tab-content active" id="electronic-visa">
                <div class="steps-img-row">
                    <div class="steps">
                        <div class="step">
                            <div class="step-num">01</div>
                            <div>
                                <div class="step-title">Fill out online application</div>
                                <div class="step-desc">Complete our easy online application and pay with credit card or PayPal</div>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-num">02</div>
                            <div>
                                <div class="step-title">Receive document via email</div>
                                <div class="step-desc">No need to deal with the embassy. We do it for you so you don't lose valuable time</div>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-num">03</div>
                            <div>
                                <div class="step-title">Enter destination</div>
                                <div class="step-desc">Present your Passport and the Document we provide upon entry to destination country</div>
                            </div>
                        </div>
                    </div>
                    <div class="steps-img">
                        <div class="image-overlay">
                            <div class="overlay-badge">
                                <i class="fas fa-check-circle"></i>
                                <span>Fast & Secure</span>
                            </div>
                        </div>
                       
                        <img src="https://visasnews.com/wp-content/uploads/2024/08/electronic-visa-evisa-tourism-travel.webp" alt="Electronic eVisa" />
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="visa-arrival">
                <div class="steps-img-row">
                    <div class="steps">
                        <div class="step">
                            <div class="step-num">01</div>
                            <div>
                                <div class="step-title">Apply online before travel</div>
                                <div class="step-desc">Submit your application and payment through our secure online platform</div>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-num">02</div>
                            <div>
                                <div class="step-title">Receive approval letter</div>
                                <div class="step-desc">Get your approval letter via email within 24-48 hours</div>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-num">03</div>
                            <div>
                                <div class="step-title">Collect visa on arrival</div>
                                <div class="step-desc">Present your approval letter and passport at the airport immigration desk</div>
                            </div>
                        </div>
                    </div>
                    <div class="steps-img">
                        <div class="image-overlay">
                            <div class="overlay-badge">
                                <i class="fas fa-plane-arrival"></i>
                                <span>On Arrival</span>
                            </div>
                        </div>
                        <img src="https://travelobiz.com/wp-content/uploads/2025/03/UK-eVisa-And-Flag.jpg" alt="e-Visa on arrival" />
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="health-declaration">
                <div class="steps-img-row">
                    <div class="steps">
                        <div class="step">
                            <div class="step-num">01</div>
                            <div>
                                <div class="step-title">Complete health questionnaire</div>
                                <div class="step-desc">Fill out the required health declaration form with your travel details</div>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-num">02</div>
                            <div>
                                <div class="step-title">Submit health documents</div>
                                <div class="step-desc">Upload any required medical certificates or vaccination records</div>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-num">03</div>
                            <div>
                                <div class="step-title">Receive health clearance</div>
                                <div class="step-desc">Get your health declaration approval for entry into the destination</div>
                            </div>
                        </div>
                    </div>
                    <div class="steps-img">
                        <div class="image-overlay">
                            <div class="overlay-badge">
                                <i class="fas fa-heartbeat"></i>
                                <span>Health Check</span>
                            </div>
                        </div>
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjUwMCIgdmlld0JveD0iMCAwIDQwMCA1MDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImhlYWx0aEdyYWRpZW50IiB4MT0iMCUiIHkxPSIwJSIgeDI9IjEwMCUiIHkyPSIxMDAlIj4KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3R5bGU9InN0b3AtY29sb3I6I2VjNDg5OTtzdG9wLW9wYWNpdHk6MSIgLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojZGNjMjYyNjtzdG9wLW9wYWNpdHk6MSIgLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8ZmlsdGVyIGlkPSJwdWxzZSI+CiAgICAgIDxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjIiIHJlc3VsdD0iY29sb3JlZEJsdXIiLz4KICAgICAgPGZlTWVyZ2U+IAogICAgICAgIDxmZU1lcmdlTm9kZSBpbj0iY29sb3JlZEJsdXIiLz4KICAgICAgICA8ZmVNZXJnZU5vZGUgaW49IlNvdXJjZUdyYXBoaWMiLz4KICAgICAgPC9mZU1lcmdlPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgogIAogIDwhLS0gQmFja2dyb3VuZCAtLT4KICA8cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjUwMCIgZmlsbD0idXJsKCNoZWFsdGhHcmFkaWVudCkiIHJ4PSIyMCIvPgogIAogIDwhLS0gTWVkaWNhbCBmb3JtIC0tPgogIDxyZWN0IHg9IjYwIiB5PSIxMjAiIHdpZHRoPSIyODAiIGhlaWdodD0iMjAwIiByeD0iMTAiIGZpbGw9IndoaXRlIiBvcGFjaXR5PSIwLjkiLz4KICA8cmVjdCB4PSI3MCIgeT0iMTMwIiB3aWR0aD0iMjYwIiBoZWlnaHQ9IjE4MCIgcng9IjUiIGZpbGw9IiNmOGZhZmMiLz4KICAKICA8IS0tIEZvcm0gaGVhZGVyIC0tPgogIDxyZWN0IHg9IjgwIiB5PSIxNDAiIHdpZHRoPSIyNDAiIGhlaWdodD0iMzAiIHJ4PSIzIiBmaWxsPSIjZWM0ODk5Ii8+CiAgPHRleHQgeD0iMjAwIiB5PSIxNjAiIGZpbGw9IndoaXRlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5IZWFsdGggRGVjbGFyYXRpb24gRm9ybTwvdGV4dD4KICAKICA8IS0tIEZvcm0gZmllbGRzIC0tPgogIDxyZWN0IHg9IjgwIiB5PSIxODAiIHdpZHRoPSIyNDAiIGhlaWdodD0iOCIgcng9IjIiIGZpbGw9IiNlMmU4ZjAiLz4KICA8cmVjdCB4PSI4MCIgeT0iMTk1IiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjgiIHJ4PSIyIiBmaWxsPSIjZTJlOGYwIi8+CiAgPHJlY3QgeD0iODAiIHk9IjIxMCIgd2lkdGg9IjIyMCIgaGVpZ2h0PSI4IiByeD0iMiIgZmlsbD0iI2UyZThmMCIvPgogIDxyZWN0IHg9IjgwIiB5PSIyMjUiIHdpZHRoPSIxODAiIGhlaWdodD0iOCIgcng9IjIiIGZpbGw9IiNlMmU4ZjAiLz4KICA8cmVjdCB4PSI4MCIgeT0iMjQwIiB3aWR0aD0iMjQwIiBoZWlnaHQ9IjgiIHJ4PSIyIiBmaWxsPSIjZTJlOGYwIi8+CiAgPHJlY3QgeD0iODAiIHk9IjI1NSIgd2lkdGg9IjE2MCIgaGVpZ2h0PSI4IiByeD0iMiIgZmlsbD0iI2UyZThmMCIvPgogIDxyZWN0IHg9IjgwIiB5PSIyNzAiIHdpZHRoPSIyMDAiIGhlaWdodD0iOCIgcng9IjIiIGZpbGw9IiNlMmU4ZjAiLz4KICAKICA8IS0tIENoZWNrYm94ZXMgLS0+CiAgPHJlY3QgeD0iODAiIHk9IjI5MCIgd2lkdGg9IjEyIiBoZWlnaHQ9IjEyIiByeD0iMiIgZmlsbD0iI2VjNDg5OSIvPgogIDxyZWN0IHg9IjgwIiB5PSIzMTAiIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgcng9IjIiIGZpbGw9IiNlYzQ4OTkiLz4KICA8cmVjdCB4PSI4MCIgeT0iMzMwIiB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIHJ4PSIyIiBmaWxsPSIjZWM0ODk5Ii8+CiAgCiAgPCEtLSBIZWFydGJlYXQgbW9uaXRvciAtLT4KICA8cmVjdCB4PSI4MCIgeT0iMzYwIiB3aWR0aD0iMjQwIiBoZWlnaHQ9IjYwIiByeD0iNSIgZmlsbD0iIzFlMjkzYiIvPgogIDxyZWN0IHg9IjkwIiB5PSIzNzAiIHdpZHRoPSIyMjAiIGhlaWdodD0iNDAiIHJ4PSIzIiBmaWxsPSIjMDAwIi8+CiAgCiAgPCEtLSBIZWFydGJlYXQgbGluZSAtLT4KICA8cGF0aCBkPSJNIDEwMCAzOTAgTCAxMjAgMzgwIEwgMTQwIDQwMCBMIDE2MCAzNzAgTCAxODAgNDEwIEwgMjAwIDM4MCBMIDIyMCA0MDAgTCAyNDAgMzcwIEwgMjYwIDM5MCBMIDI4MCAzODAgTCAzMDAgNDAwIiBzdHJva2U9IiNlYzQ4OTkiIHN0cm9rZS13aWR0aD0iMyIgZmlsbD0ibm9uZSIvPgogIAogIDwhLS0gTWVkaWNhbCBjcm9zcyAtLT4KICA8cmVjdCB4PSIzMjAiIHk9IjE0MCIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiByeD0iMiIgZmlsbD0iI2VjNDg5OSIvPgogIDxyZWN0IHg9IjMyNSIgeT0iMTQ1IiB3aWR0aD0iMTAiIGhlaWdodD0iMTAiIGZpbGw9IndoaXRlIi8+CiAgPHJlY3QgeD0iMzMwIiB5PSIxNDAiIHdpZHRoPSIyIiBoZWlnaHQ9IjIwIiBmaWxsPSJ3aGl0ZSIvPgogIDxyZWN0IHg9IjMyNSIgeT0iMTUwIiB3aWR0aD0iMTAiIGhlaWdodD0iMiIgZmlsbD0id2hpdGUiLz4KICAKICA8IS0tIFN0ZXRob3Njb3BlIC0tPgogIDxwYXRoIGQ9Ik0gNTAgMjAwIFEgMzAgMTgwIDUwIDE2MCBRIDcwIDE4MCA1MCAyMDAiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iNCIgZmlsbD0ibm9uZSIvPgogIDxwYXRoIGQ9Ik0gNTAgMjAwIEwgODAgMjAwIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjQiIGZpbGw9Im5vbmUiLz4KICA8Y2lyY2xlIGN4PSI4MCIgY3k9IjIwMCIgcj0iOCIgZmlsbD0id2hpdGUiLz4KICA8cGF0aCBkPSJNIDgwIDIwMCBMIDExMCAyMDAiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iNCIgZmlsbD0ibm9uZSIvPgogIDxjaXJjbGUgY3g9IjExMCIgY3k9IjIwMCIgcj0iOCIgZmlsbD0id2hpdGUiLz4KICAKICA8IS0tIFZhY2NpbmF0aW9uIGNlcnRpZmljYXRlIC0tPgogIDxyZWN0IHg9IjgwIiB5PSI0NTAiIHdpZHRoPSI4MCIgaGVpZ2h0PSI2MCIgcng9IjUiIGZpbGw9IiMxMGI5ODEiLz4KICA8cmVjdCB4PSI4NSIgeT0iNDU1IiB3aWR0aD0iNzAiIGhlaWdodD0iNTAiIHJ4PSIzIiBmaWxsPSJ3aGl0ZSIvPgogIDxyZWN0IHg9IjkwIiB5PSI0NjAiIHdpZHRoPSI2MCIgaGVpZ2h0PSI4IiBmaWxsPSIjMTBiOTgxIi8+CiAgPHJlY3QgeD0iOTAiIHk9IjQ3NSIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQiIGZpbGw9IiM2NDc0OGIiLz4KICA8cmVjdCB4PSI5MCIgeT0iNDg1IiB3aWR0aD0iNTAiIGhlaWdodD0iNCIgZmlsbD0iIzY0NzQ4YiIvPgogIDxjaXJjbGUgY3g9IjExNSIgY3k9IjQ5NSIgcj0iMyIgZmlsbD0iIzEwYjk4MSIvPgogIAogIDwhLS0gQXBwcm92YWwgc3RhbXAgLS0+CiAgPHJlY3QgeD0iMjQwIiB5PSI0NTAiIHdpZHRoPSI4MCIgaGVpZ2h0PSI2MCIgcng9IjUiIGZpbGw9IiNmNTllMGIiLz4KICA8cmVjdCB4PSIyNDUiIHk9IjQ1NSIgd2lkdGg9IjcwIiBoZWlnaHQ9IjUwIiByeD0iMyIgZmlsbD0id2hpdGUiLz4KICA8Y2lyY2xlIGN4PSIyODAiIGN5PSI0ODAiIHI9IjE1IiBmaWxsPSIjZjU5ZTBiIiBvcGFjaXR5PSIwLjMiLz4KICA8dGV4dCB4PSIyODAiIHk9IjQ4NSIgZmlsbD0iI2Y1OWUwYiIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmb250LXdlaWdodD0iYm9sZCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+QVBQUk9WRUQ8L3RleHQ+CiAgCiAgPCEtLSBGbG9hdGluZyBlbGVtZW50cyAtLT4KICA8Y2lyY2xlIGN4PSIzMjAiIGN5PSIxMDAiIHI9IjEwIiBmaWxsPSJ3aGl0ZSIgb3BhY2l0eT0iMC4zIi8+CiAgPGNpcmNsZSBjeD0iODAiIGN5PSI4MCIgcj0iNiIgZmlsbD0id2hpdGUiIG9wYWNpdHk9IjAuMiIvPgogIDxjaXJjbGUgY3g9IjM1MCIgY3k9IjE4MCIgcj0iNCIgZmlsbD0id2hpdGUiIG9wYWNpdHk9IjAuMiIvPgogIAogIDwhLS0gVGV4dCAtLT4KICA8dGV4dCB4PSIyMDAiIHk9IjQyMCIgZmlsbD0id2hpdGUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIyNCIgZm9udC13ZWlnaHQ9ImJvbGQiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkhlYWx0aCBEZWNsYXJhdGlvbjwvdGV4dD4KICA8dGV4dCB4PSIyMDAiIHk9IjQ0NSIgZmlsbD0id2hpdGUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgb3BhY2l0eT0iMC45Ij5NZWRpY2FsIENsZWFyYW5jZTwvdGV4dD4KICA8dGV4dCB4PSIyMDAiIHk9IjQ3MCIgZmlsbD0id2hpdGUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgb3BhY2l0eT0iMC44Ij5TYWZlIFRyYXZlbCBBc3N1cmFuY2U8L3RleHQ+Cjwvc3ZnPg==" alt="UK health declaration process" />
                    </div>
                </div>
            </div>

            <div class="tab-content" id="guided-visa">
                <div class="steps-img-row">
                    <div class="steps">
                        <div class="step">
                            <div class="step-num">01</div>
                            <div>
                                <div class="step-title">Consult with our experts</div>
                                <div class="step-desc">Get personalized guidance from our visa specialists for your specific case</div>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-num">02</div>
                            <div>
                                <div class="step-title">Complete application with support</div>
                                <div class="step-desc">We guide you through every step of the application process</div>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-num">03</div>
                            <div>
                                <div class="step-title">Track and receive visa</div>
                                <div class="step-desc">Monitor your application progress and receive your visa upon approval</div>
                            </div>
                        </div>
                    </div>
                    <div class="steps-img">
                        <div class="image-overlay">
                            <div class="overlay-badge">
                                <i class="fas fa-user-tie"></i>
                                <span>Expert Guide</span>
                            </div>
                        </div>
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjUwMCIgdmlld0JveD0iMCAwIDQwMCA1MDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9Imd1aWRlZEdyYWRpZW50IiB4MT0iMCUiIHkxPSIwJSIgeDI9IjEwMCUiIHkyPSIxMDAlIj4KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3R5bGU9InN0b3AtY29sb3I6IzM2NzVmMztzdG9wLW9wYWNpdHk6MSIgLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojNzI2OWRhO3N0b3Atb3BhY2l0eToxIiAvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxmaWx0ZXIgaWQ9InNoYWRvdyI+CiAgICAgIDxmZWRyb3BTaGFkb3cgZHg9IjIiIGR5PSIyIiBzdGREZXZpYXRpb249IjMiIGZsb29kLWNvbG9yPSIjMDAwMDAwIiBmbG9vZC1vcGFjaXR5PSIwLjIiLz4KICAgIDwvZmlsdGVyPgogIDwvZGVmcz4KICAKICA8IS0tIEJhY2tncm91bmQgLS0+CiAgPHJlY3Qgd2lkdGg9IjQwMCIgaGVpZ2h0PSI1MDAiIGZpbGw9InVybCgjZ3VpZGVkR3JhZGllbnQpIiByeD0iMjAiLz4KICAKICA8IS0tIENvbnN1bHRhdGlvbiByb29tIC0tPgogIDxyZWN0IHg9IjYwIiB5PSIxMjAiIHdpZHRoPSIyODAiIGhlaWdodD0iMjAwIiByeD0iMTAiIGZpbGw9IndoaXRlIiBvcGFjaXR5PSIwLjkiLz4KICA8cmVjdCB4PSI3MCIgeT0iMTMwIiB3aWR0aD0iMjYwIiBoZWlnaHQ9IjE4MCIgcng9IjUiIGZpbGw9IiNmOGZhZmMiLz4KICAKICA8IS0tIERlc2sgLS0+CiAgPHJlY3QgeD0iODAiIHk9IjE4MCIgd2lkdGg9IjI0MCIgaGVpZ2h0PSIxMjAiIHJ4PSI1IiBmaWxsPSIjMzY3NWYzIi8+CiAgPHJlY3QgeD0iOTAiIHk9IjE5MCIgd2lkdGg9IjIyMCIgaGVpZ2h0PSIxMDAiIHJ4PSIzIiBmaWxsPSIjZThlYWY2Ii8+CiAgCiAgPCEtLSBDb21wdXRlciAtLT4KICA8cmVjdCB4PSIxMDAiIHk9IjIwMCIgd2lkdGg9IjE4MCIgaGVpZ2h0PSIxMjAiIHJ4PSIzIiBmaWxsPSIjMWUyOTNiIi8+CiAgPHJlY3QgeD0iMTEwIiB5PSIyMTAiIHdpZHRoPSIxNjAiIGhlaWdodD0iMTAwIiByeD0iMiIgZmlsbD0iIzNiODJmNiIvPgogIDxyZWN0IHg9IjEyMCIgeT0iMjIwIiB3aWR0aD0iMTQwIiBoZWlnaHQ9IjgwIiByeD0iMiIgZmlsbD0iIzFmMjkzYiIvPgogIAogIDwhLS0gU2NyZWVuIGNvbnRlbnQgLS0+CiAgPHJlY3QgeD0iMTMwIiB5PSIyMzAiIHdpZHRoPSIxMjAiIGhlaWdodD0iMTUiIHJ4PSIyIiBmaWxsPSJ3aGl0ZSIgb3BhY2l0eT0iMC44Ii8+CiAgPHJlY3QgeD0iMTMwIiB5PSIyNTUiIHdpZHRoPSI5MCIgaGVpZ2h0PSI2IiByeD0iMiIgZmlsbD0id2hpdGUiIG9wYWNpdHk9IjAuNiIvPgogIDxyZWN0IHg9IjEzMCIgeT0iMjY1IiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjYiIHJ4PSIyIiBmaWxsPSJ3aGl0ZSIgb3BhY2l0eT0iMC42Ii8+CiAgPHJlY3QgeD0iMTMwIiB5PSIyNzUiIHdpZHRoPSI4MCIgaGVpZ2h0PSI2IiByeD0iMiIgZmlsbD0id2hpdGUiIG9wYWNpdHk9IjAuNiIvPgogIDxyZWN0IHg9IjEzMCIgeT0iMjg1IiB3aWR0aD0iMTEwIiBoZWlnaHQ9IjYiIHJ4PSIyIiBmaWxsPSJ3aGl0ZSIgb3BhY2l0eT0iMC42Ii8+CiAgPHJlY3QgeD0iMTMwIiB5PSIyOTUiIHdpZHRoPSI3MCIgaGVpZ2h0PSI2IiByeD0iMiIgZmlsbD0id2hpdGUiIG9wYWNpdHk9IjAuNiIvPgogIAogIDwhLS0gUGVyc29ucyAtLT4KICA8IS0tIENvbnN1bHRhbnQgLS0+CiAgPGNpcmNsZSBjeD0iMTgwIiBjeT0iMzIwIiByPSIxOCIgZmlsbD0iIzM2NzVmMyIvPgogIDxyZWN0IHg9IjE2MiIgeT0iMzM4IiB3aWR0aD0iMzYiIGhlaWdodD0iNDAiIHJ4PSIxOCIgZmlsbD0iIzM2NzVmMyIvPgogIDxyZWN0IHg9IjE2NSIgeT0iMzQ4IiB3aWR0aD0iMzAiIGhlaWdodD0iMjAiIHJ4PSIxNSIgZmlsbD0iIzM2NzVmMyIvPgogIAogIDwhLS0gQ2xpZW50IC0tPgogIDxjaXJjbGUgY3g9IjIyMCIgY3k9IjMyMCIgcj0iMTUiIGZpbGw9IiNmNTllMGIiLz4KICA8cmVjdCB4PSIyMDUiIHk9IjMzNSIgd2lkdGg9IjMwIiBoZWlnaHQ9IjQwIiByeD0iMTUiIGZpbGw9IiNmNTllMGIiLz4KICA8cmVjdCB4PSIyMTAiIHk9IjM0NSIgd2lkdGg9IjIwIiBoZWlnaHQ9IjE1IiByeD0iMTAiIGZpbGw9IiNmNTllMGIiLz4KICAKICA8IS0tIERvY3VtZW50cyAtLT4KICA8cmVjdCB4PSI4MCIgeT0iNDAwIiB3aWR0aD0iNjAiIGhlaWdodD0iNDUiIHJ4PSI1IiBmaWxsPSIjZjU5ZTBiIi8+CiAgPHJlY3QgeD0iODUiIHk9IjQwNSIgd2lkdGg9IjUwIiBoZWlnaHQ9IjM1IiByeD0iMyIgZmlsbD0id2hpdGUiLz4KICA8cmVjdCB4PSI5MCIgeT0iNDEwIiB3aWR0aD0iNDAiIGhlaWdodD0iOCIgZmlsbD0iIzFlMjkzYiIvPgogIDxyZWN0IHg9IjkwIiB5PSI0MjUiIHdpZHRoPSIzMCIgaGVpZ2h0PSI0IiBmaWxsPSIjNjQ3NDhiIi8+CiAgPHJlY3QgeD0iOTAiIHk9IjQzMyIgd2lkdGg9IjM1IiBoZWlnaHQ9IjQiIGZpbGw9IiM2NDc0OGIiLz4KICAKICA8IS0tIENoZWNrbGlzdCAtLT4KICA8cmVjdCB4PSIyNjAiIHk9IjQwMCIgd2lkdGg9IjYwIiBoZWlnaHQ9IjQ1IiByeD0iNSIgZmlsbD0iIzEwYjk4MSIvPgogIDxyZWN0IHg9IjI2NSIgeT0iNDA1IiB3aWR0aD0iNTAiIGhlaWdodD0iMzUiIHJ4PSIzIiBmaWxsPSJ3aGl0ZSIvPgogIDxyZWN0IHg9IjI3MCIgeT0iNDEwIiB3aWR0aD0iNDAiIGhlaWdodD0iOCIgZmlsbD0iIzEwYjk4MSIvPgogIDxyZWN0IHg9IjI3MCIgeT0iNDIwIiB3aWR0aD0iMzAiIGhlaWdodD0iMiIgZmlsbD0iIzEwYjk4MSIvPgogIDxyZWN0IHg9IjI3MCIgeT0iNDI1IiB3aWR0aD0iMzAiIGhlaWdodD0iMiIgZmlsbD0iIzEwYjk4MSIvPgogIDxyZWN0IHg9IjI3MCIgeT0iNDMwIiB3aWR0aD0iMzAiIGhlaWdodD0iMiIgZmlsbD0iIzEwYjk4MSIvPgogIDxyZWN0IHg9IjI3MCIgeT0iNDM1IiB3aWR0aD0iMzAiIGhlaWdodD0iMiIgZmlsbD0iIzEwYjk4MSIvPgogIAogIDwhLS0gQ29ubmVjdGlvbiBsaW5lcyAtLT4KICA8cGF0aCBkPSJNIDE0MCAzNzggTCAxODAgMzIwIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjMiIGZpbGw9Im5vbmUiIG9wYWNpdHk9IjAuNyIvPgogIDxwYXRoIGQ9Ik0gMjIwIDM1NSBMIDI2MCA0MDAiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMyIgZmlsbD0ibm9uZSIgb3BhY2l0eT0iMC43Ii8+CiAgCiAgPCEtLSBTcGVlY2ggYnViYmxlcyAtLT4KICA8cmVjdCB4PSIxNDAiIHk9IjI4MCIgd2lkdGg9IjgwIiBoZWlnaHQ9IjQwIiByeD0iMTUiIGZpbGw9IndoaXRlIiBvcGFjaXR5PSIwLjkiLz4KICA8cmVjdCB4PSIxODAiIHk9IjI4MCIgd2lkdGg9IjgwIiBoZWlnaHQ9IjQwIiByeD0iMTUiIGZpbGw9IndoaXRlIiBvcGFjaXR5PSIwLjkiLz4KICA8dGV4dCB4PSIxODAiIHk9IjMwMCIgZmlsbD0iIzM2NzVmMyIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5FeHBlcnQgQWR2aWNlPC90ZXh0PgogIDx0ZXh0IHg9IjIyMCIgeT0iMzAwIiBmaWxsPSIjZjU5ZTBiIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkNsaWVudCBRdWVzdGlvbnM8L3RleHQ+CiAgCiAgPCEtLSBGbG9hdGluZyBlbGVtZW50cyAtLT4KICA8Y2lyY2xlIGN4PSIzMjAiIGN5PSIxMDAiIHI9IjEwIiBmaWxsPSJ3aGl0ZSIgb3BhY2l0eT0iMC4zIi8+CiAgPGNpcmNsZSBjeD0iODAiIGN5PSI4MCIgcj0iNiIgZmlsbD0id2hpdGUiIG9wYWNpdHk9IjAuMiIvPgogIDxjaXJjbGUgY3g9IjM1MCIgY3k9IjE4MCIgcj0iNCIgZmlsbD0id2hpdGUiIG9wYWNpdHk9IjAuMiIvPgogIAogIDwhLS0gVGV4dCAtLT4KICA8dGV4dCB4PSIyMDAiIHk9IjQyMCIgZmlsbD0id2hpdGUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIyNCIgZm9udC13ZWlnaHQ9ImJvbGQiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkd1aWRlZCBWaXNhPC90ZXh0PgogIDx0ZXh0IHg9IjIwMCIgeT0iNDQ1IiBmaWxsPSJ3aGl0ZSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE2IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBvcGFjaXR5PSIwLjkiPkV4cGVydCBDb25zdWx0YXRpb248L3RleHQ+CiAgPHRleHQgeD0iMjAwIiB5PSI0NzAiIGZpbGw9IndoaXRlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIHRleHQtYW5jaG9yPSJtaWRkbGUiIG9wYWNpdHk9IjAuOCI+UGVyc29uYWxpemVkIFN1cHBvcnQ8L3RleHQ+Cjwvc3ZnPg==" alt="UK guided visa consultation service" />
                    </div>
                </div>
            </div>
        </div>
    </section>

    
    <section class="process" id="process">
        <div class="container">
            <div class="section-title">
                <h2>Why choose UK Visa Services?</h2>
                <p>Join thousands of successful applicants who trust our expertise for their UK immigration journey</p>
            </div>
            <div class="process-steps">
                <div class="process-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3>Expert Guidance</h3>
                        <p>Professional immigration consultants with years of experience in UK visa applications.</p>
                    </div>
                </div>
                <div class="process-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3>High Success Rate</h3>
                        <p>98% approval rate with comprehensive document preparation and application review.</p>
                    </div>
                </div>
                <div class="process-step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h3>24/7 Support</h3>
                        <p>Round-the-clock expert support for all your visa application questions and concerns.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="contact" id="contact">
        <div class="container">
            <div class="section-title">
                <h2>Ready to start your UK visa application?</h2>
                <p>Join thousands of successful applicants who have achieved their UK immigration goals with our expert guidance</p>
            </div>
            <form class="contact-form">
                <div class="form-group">
                    <label for="name">Full Name</label>
                    <input type="text" id="name" required placeholder="Enter your full name">
                </div>
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" required placeholder="Enter your email address">
                </div>
                <div class="form-group">
                    <label for="visa-type">Visa Type of Interest</label>
                    <select id="visa-type" required>
                        <option value="">Select visa type</option>
                        <option value="student">Student Visa</option>
                        <option value="work">Work Visa</option>
                        <option value="family">Family Visa</option>
                        <option value="business">Business Visa</option>
                        <option value="visitor">Visitor Visa</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="message">Message</label>
                    <textarea id="message" rows="5" required placeholder="Tell us about your visa requirements and timeline"></textarea>
                </div>
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-paper-plane"></i> Start Application
                </button>
            </form>
        </div>
    </section>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>ICS Legal</h3>
                    <p>Your trusted partner for UK immigration services. We specialize in immigration law, human rights law, British nationality law, and European law. Providing expert legal advice and representation since 2006.</p>
                    <p style="margin-top: 1rem; font-size: 0.9rem; opacity: 0.9;">Regulated by the Office of the Immigration Services Commissioner (OISC)</p>
                    <div class="social-links">
                        <a href="https://www.linkedin.com/company/ics-legal" target="_blank" rel="noopener noreferrer"><i class="fab fa-linkedin-in"></i></a>
                        <a href="https://www.facebook.com/icslegal" target="_blank" rel="noopener noreferrer"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://twitter.com/icslegal" target="_blank" rel="noopener noreferrer"><i class="fab fa-twitter"></i></a>
                    </div>
                </div>
                <div class="footer-column">
                    <h3>Immigration Services</h3>
                    <ul class="footer-links">
                        <li><a href="https://www.icslegal.com/immigration-advice" target="_blank" rel="noopener noreferrer">Immigration Advice</a></li>
                        <li><a href="https://www.icslegal.com/visa-applications" target="_blank" rel="noopener noreferrer">Visa Applications</a></li>
                        <li><a href="https://www.icslegal.com/appeals" target="_blank" rel="noopener noreferrer">Appeals</a></li>
                        <li><a href="https://www.icslegal.com/british-nationality" target="_blank" rel="noopener noreferrer">British Nationality</a></li>
                        <li><a href="https://www.icslegal.com/european-law" target="_blank" rel="noopener noreferrer">European Law</a></li>
                        <li><a href="https://www.icslegal.com/human-rights" target="_blank" rel="noopener noreferrer">Human Rights</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Company</h3>
                    <ul class="footer-links">
                        <li><a href="https://www.icslegal.com/about-us" target="_blank" rel="noopener noreferrer">About Us</a></li>
                        <li><a href="https://www.icslegal.com/our-team" target="_blank" rel="noopener noreferrer">Our Team</a></li>
                        <li><a href="https://www.icslegal.com/news" target="_blank" rel="noopener noreferrer">News & Updates</a></li>
                        <li><a href="https://www.icslegal.com/testimonials" target="_blank" rel="noopener noreferrer">Testimonials</a></li>
                        <li><a href="https://www.icslegal.com/faq" target="_blank" rel="noopener noreferrer">FAQ</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Contact & Support</h3>
                    <ul class="footer-links">
                        <li><a href="https://www.icslegal.com/contact-us" target="_blank" rel="noopener noreferrer">Contact Us</a></li>
                        <li><a href="https://booking.icslegal.com" target="_blank" rel="noopener noreferrer">Book a Consultation</a></li>
                        <li><a href="client-login.html" target="_blank" rel="noopener noreferrer">Client Access Portal</a></li>
                        <li style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid rgba(255,255,255,0.1);">
                            <strong>Phone:</strong><br>
                            <a href="tel:+442072373388" style="color: var(--light);">020 7237 3388</a>
                        </li>
                        <li>
                            <strong>Email:</strong><br>
                            <a href="mailto:info@icslegal.com" style="color: var(--light);">info@icslegal.com</a>
                        </li>
                    </ul>
                </div>
            </div>
            <div style="text-align: center; padding-top: 2rem; border-top: 1px solid rgba(255,255,255,0.1); margin-top: 2rem; color: var(--light-gray);">
                <p>&copy; 2024 ICS Legal. All rights reserved. | <a href="https://www.icslegal.com/privacy-policy" target="_blank" rel="noopener noreferrer" style="color: var(--light-gray);">Privacy Policy</a> | <a href="https://www.icslegal.com/terms" target="_blank" rel="noopener noreferrer" style="color: var(--light-gray);">Terms & Conditions</a></p>
            </div>
        </div>
    </footer>
    <div class="chat-modal" id="chatModal">
        <div class="chat-container">
            <div class="progress-bar" id="progressBar"></div>
            <div class="step-indicator" id="stepIndicator">Step 1 of 9</div>
            
            <div class="chat-header">
                <h3>
                    <i class="fas fa-passport"></i>
                Apply for UK Visa chat assistant
                </h3>
                <button class="close-btn" id="closeChat">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="chat-body">
                <div class="chat-messages" id="chatMessages">
                    
                </div>
            </div>
        </div>
    </div>

    <script>
        
        window.addEventListener('scroll', function() {
            const navbar = document.querySelector('.navbar');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });

    
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        
        document.addEventListener('DOMContentLoaded', function() {
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(tc => tc.classList.remove('active'));
                    
                
                    this.classList.add('active');
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active');
                });
            });
        });

        
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

    
        document.querySelectorAll('.feature-card, .step, .process-step').forEach(el => {
            el.style.opacity = '0';
            el.style.transform = 'translateY(30px)';
            el.style.transition = 'all 0.6s ease';
            observer.observe(el);
        });

       
        const payrollBtn = document.getElementById('payrollBtn');

        if (payrollBtn) {
            payrollBtn.addEventListener('click', function() {
              
                window.open('templates_chat.html', '_blank', 'width=900,height=700,scrollbars=yes,resizable=yes');
            });
        }

        
        document.addEventListener('DOMContentLoaded', function() {
            
            const animatedElements = document.querySelectorAll('.feature-card, .step, .process-step, .stat-item');
            animatedElements.forEach((el, index) => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(30px)';
                setTimeout(() => {
                    el.style.transition = 'all 0.6s ease';
                    el.style.opacity = '1';
                    el.style.transform = 'translateY(0)';
                }, index * 100);
            });

            
            window.addEventListener('scroll', function() {
                const scrolled = window.pageYOffset;
                const parallaxElements = document.querySelectorAll('.particle, .gradient-orb');
                
                parallaxElements.forEach((el, index) => {
                    const speed = 0.5 + (index * 0.1);
                    el.style.transform = `translateY(${scrolled * speed}px)`;
                });
            });

            
            let mouseTrail = null;
            document.addEventListener('mousemove', function(e) {
                if (!mouseTrail) {
                    mouseTrail = document.createElement('div');
                    mouseTrail.className = 'mouse-trail';
                    document.body.appendChild(mouseTrail);
                }
                
                mouseTrail.style.left = e.clientX + 'px';
                mouseTrail.style.top = e.clientY + 'px';
            });

            
            const buttons = document.querySelectorAll('.btn, .modern-hero-btn');
            buttons.forEach(button => {
                button.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-2px) scale(1.02)';
                });
                
                button.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) scale(1)';
                });
            });

                
        function animateNumber(element, finalValue, duration = 2000, suffix = '') {
            const startValue = 0;
            const startTime = performance.now();
            
            function updateNumber(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
            
                const easeOutQuart = 1 - Math.pow(1 - progress, 4);
                const currentValue = Math.floor(startValue + (finalValue - startValue) * easeOutQuart);
                
                element.textContent = currentValue + suffix;
                
                if (progress < 1) {
                    requestAnimationFrame(updateNumber);
                }
            }
            
            requestAnimationFrame(updateNumber);
        }

    
        const statsObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const statNumber = entry.target.querySelector('h3');
                    const statText = statNumber.textContent;
                    
                    
                    const match = statText.match(/(\d+(?:\.\d+)?)(.*)/);
                    if (match) {
                        const number = parseFloat(match[1]);
                        const suffix = match[2] || '';
                        
                                        
                    statNumber.classList.add('animate');
                    setTimeout(() => {
                        statNumber.classList.remove('animate');
                    }, 600);
                    
                
                    animateNumber(statNumber, number, 2000, suffix);
                    }
                    
                    statsObserver.unobserve(entry.target);
                }
            });
        }, { threshold: 0.5 });

                    document.querySelectorAll('.stat-item').forEach(stat => {
            statsObserver.observe(stat);
        });

        
        const stepObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const stepNumber = entry.target.querySelector('.step-number');
                    const stepNum = entry.target.querySelector('.step-num');
                    
                    if (stepNumber) {
                    
                        stepNumber.classList.add('animate');
                        setTimeout(() => {
                            stepNumber.classList.remove('animate');
                        }, 600);
                    }
                    
                    if (stepNum) {
                        
                        stepNum.classList.add('animate');
                        setTimeout(() => {
                            stepNum.classList.remove('animate');
                        }, 600);
                    }
                    
                    stepObserver.unobserve(entry.target);
                }
            });
        }, { threshold: 0.5 });

        document.querySelectorAll('.process-step, .step').forEach(step => {
            stepObserver.observe(step);
        });

        const numberObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const element = entry.target;
                    const text = element.textContent;
                    
                    
                    const numberMatch = text.match(/(\d+(?:\.\d+)?)(.*)/);
                    if (numberMatch) {
                        const number = parseFloat(numberMatch[1]);
                        const suffix = numberMatch[2] || '';
                        
                        
                        element.classList.add('number-highlight');
                        setTimeout(() => {
                            element.classList.remove('number-highlight');
                        }, 1000);
                        
                        
                        if (!element.dataset.animated) {
                            element.dataset.animated = 'true';
                            animateNumber(element, number, 1500, suffix);
                        }
                    }
                    
                    numberObserver.unobserve(entry.target);
                }
            });
        }, { threshold: 0.3 });

        
        document.querySelectorAll('h1, h2, h3, p, .feature-card h3, .step-title').forEach(el => {
            numberObserver.observe(el);
        });

        
        const heroTitle = document.querySelector('.hero h1');
        if (heroTitle) {
            const text = heroTitle.textContent;
            const words = text.split(' ');
            
            heroTitle.innerHTML = words.map((word, index) => {
                if (word.includes('Anywhere')) {
                    return `<span class="hero-word" style="animation-delay: ${0.5 + index * 0.1}s">${word}</span>`;
                }
                return `<span class="hero-word" style="animation-delay: ${index * 0.1}s">${word}</span>`;
            }).join(' ');
        }

        
        const heroStyle = document.createElement('style');
        heroStyle.textContent = `
            .hero-word {
                display: inline-block;
                opacity: 0;
                transform: translateY(20px);
                animation: heroWordFadeIn 0.8s ease-out forwards;
            }

            @keyframes heroWordFadeIn {
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
        `;
        document.head.appendChild(heroStyle);

        
            const revealObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('revealed');
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('section').forEach(section => {
                revealObserver.observe(section);
            });
        });

        
        const style = document.createElement('style');
        style.textContent = `
            section {
                opacity: 0;
                transform: translateY(30px);
                transition: all 0.8s ease;
            }
            
            section.revealed {
                opacity: 1;
                transform: translateY(0);
            }
            
            .mouse-trail {
                position: fixed;
                width: 6px;
                height: 6px;
                background: var(--secondary);
                border-radius: 50%;
                pointer-events: none;
                z-index: 9999;
                opacity: 0.6;
                transition: all 0.1s ease;
            }
        `;
        document.head.appendChild(style);

        
        const buttons = document.querySelectorAll('.btn, .modern-hero-btn');
        buttons.forEach(button => {
            button.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-2px) scale(1.02)';
            });
            
            button.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0) scale(1)';
            });
        });

    
        const chatModal = document.getElementById('chatModal');
        const closeChat = document.getElementById('closeChat');
        const chatMessages = document.getElementById('chatMessages');
        const progressBar = document.getElementById('progressBar');
        const stepIndicator = document.getElementById('stepIndicator');

        let currentStep = 1;
        let userResponses = {};
        let isTyping = false;

        
        function loadVisaTypesFromAdmin() {
            const storedVisaTypes = JSON.parse(localStorage.getItem('visaTypes')) || [];
            if (storedVisaTypes.length > 0) {
                return storedVisaTypes.filter(visa => visa.active).map(visa => ({
                    name: visa.name || 'Unknown Visa',
                    description: visa.description || '',
                    basePrice: visa.basePrice || 0
                }));
            } else {
                
                return [
                    { name: 'Business Visa', description: 'For business-related activities', basePrice: 299 },
                    { name: 'Family Visa', description: 'For family reunification', basePrice: 399 },
                    { name: 'General Visitor Visa', description: 'For short-term visits', basePrice: 199 },
                    { name: 'Graduate Visa', description: 'For recent graduates', basePrice: 249 },
                    { name: 'Health and Care Worker Visa', description: 'For healthcare professionals', basePrice: 499 },
                    { name: 'High Potential Individual Visa', description: 'For highly skilled individuals', basePrice: 599 },
                    { name: 'Innovator Visa', description: 'For innovative entrepreneurs', basePrice: 699 },
                    { name: 'Investor Visa', description: 'For high-net-worth investors', basePrice: 799 },
                    { name: 'Marriage Visitor Visa', description: 'For spouses visiting the UK', basePrice: 299 },
                    { name: 'Parent of a Child Student Visa', description: 'For parents of child students', basePrice: 399 },
                    { name: 'Partner Visa', description: 'For partners of UK citizens', basePrice: 499 },
                    { name: 'Skilled Worker Visa', description: 'For skilled workers', basePrice: 599 },
                    { name: 'Student Visa', description: 'For full-time students', basePrice: 299 },
                    { name: 'Temporary Worker Visa', description: 'For temporary work assignments', basePrice: 399 },
                    { name: 'Youth Mobility Scheme Visa', description: 'For young travelers', basePrice: 199 }
                ];
            }
        }

    
        function loadPackagesFromAdmin() {
            const storedPackages = JSON.parse(localStorage.getItem('packages')) || [];
            if (storedPackages.length > 0) {
                return storedPackages.filter(pkg => pkg.active).reduce((acc, pkg) => {
                    acc[pkg.name.toLowerCase().replace(/\s+/g, '_')] = {
                        name: pkg.name,
                        price: `${pkg.price}`,
                        features: pkg.features
                    };
                    return acc;
                }, {});
            } else {
            
                return {
                    'basic': {
                        name: 'Basic Package',
                        price: '299',
                        features: [
                            'Visa application guidance',
                            'Document checklist',
                            'Email support',
                            'Basic review service'
                        ]
                    },
                    'premium': {
                        name: 'Premium Package',
                        price: '599',
                        features: [
                            'Everything in Basic',
                            'Priority processing',
                            'Phone support',
                            'Full document review',
                            'Application submission assistance'
                        ]
                    },
                    'premium_plus': {
                        name: 'Premium Plus Package',
                        price: '999',
                        features: [
                            'Everything in Premium',
                            'Dedicated case manager',
                            'Interview preparation',
                            'Appeal support if needed',
                            '24/7 emergency support'
                        ]
                    }
                };
            }
        }

        
        function loadSettingsFromAdmin() {
            const storedSettings = JSON.parse(localStorage.getItem('settings')) || {};
            return {
                defaultCredits: storedSettings.defaultCredits || 10,
                companyName: storedSettings.companyName || 'ICS LEGAL',
                contactEmail: storedSettings.contactEmail || 'info@icslegal.com'
            };
        }
        function loadDependentCostsFromAdmin() {
            const storedDependentCosts = JSON.parse(localStorage.getItem('dependentCosts')) || [];
            if (storedDependentCosts.length > 0) {
                return storedDependentCosts.filter(dependent => dependent.active).map(dependent => ({
                    id: dependent.id,
                    visaTypeId: dependent.visaTypeId,
                    visaTypeName: dependent.visaTypeName,
                    dependentType: dependent.dependentType,
                    dependentTypeLabel: dependent.dependentTypeLabel,
                    additionalCost: dependent.additionalCost,
                    maxDependents: dependent.maxDependents,
                    processingTime: dependent.processingTime,
                    requirements: dependent.requirements || [],
                    notes: dependent.notes || ''
                }));
            } else {
                
                return [
                    { id: 1, visaTypeId: 1, visaTypeName: 'Business Visa', dependentType: 'spouse', dependentTypeLabel: 'Spouse/Partner', additionalCost: 150, maxDependents: 2, processingTime: 5, requirements: ['Marriage certificate', 'Proof of relationship'], notes: 'Spouse can apply together with main applicant' },
                    { id: 2, visaTypeId: 1, visaTypeName: 'Business Visa', dependentType: 'child', dependentTypeLabel: 'Child (Under 18)', additionalCost: 100, maxDependents: 3, processingTime: 3, requirements: ['Birth certificate', 'Proof of relationship'], notes: 'Children under 18 can be included' },
                    { id: 3, visaTypeId: 2, visaTypeName: 'Family Visa', dependentType: 'child', dependentTypeLabel: 'Child (Under 18)', additionalCost: 200, maxDependents: 5, processingTime: 10, requirements: ['Birth certificate', 'Proof of relationship', 'Financial support evidence'], notes: 'Family visas allow more dependents' },
                    { id: 4, visaTypeId: 12, visaTypeName: 'Skilled Worker Visa', dependentType: 'spouse', dependentTypeLabel: 'Spouse/Partner', additionalCost: 200, maxDependents: 2, processingTime: 7, requirements: ['Marriage certificate', 'Proof of relationship', 'Financial evidence'], notes: 'Spouse can work in the UK' },
                    { id: 5, visaTypeId: 12, visaTypeName: 'Skilled Worker Visa', dependentType: 'child', dependentTypeLabel: 'Child (Under 18)', additionalCost: 150, maxDependents: 3, processingTime: 5, requirements: ['Birth certificate', 'Proof of relationship'], notes: 'Children can study in the UK' }
                ];
            }
        }

        
        function calculateTotalCost(basePrice, selectedVisa, dependents) {
            let totalCost = basePrice;
            const dependentCosts = loadDependentCostsFromAdmin();
            
            if (dependents && dependents.length > 0) {
                dependents.forEach(dependent => {
                    const dependentRule = dependentCosts.find(dc => 
                        dc.visaTypeName === selectedVisa && 
                        dc.dependentType === dependent.type
                    );
                    if (dependentRule) {
                        totalCost += dependentRule.additionalCost;
                    }
                });
            }
            
            return totalCost;
        }

        const creditPackages = [
            { credits: 10, price: 'Free', description: 'Included automatically' },
            { credits: 25, price: '49', description: 'Additional 15 credits' },
            { credits: 50, price: '89', description: 'Additional 40 credits' },
            { credits: 100, price: '159', description: 'Additional 90 credits' }
        ];


        function initChat() {
            currentStep = 1;
            userResponses = {};
            chatMessages.innerHTML = '';
            updateProgress();
            showWelcomeMessage();
            updateVisaSummary();
            
            
            setTimeout(() => {
                smoothScrollToBottom();
            }, 500);
        }

        
        function updateProgress() {
            const progress = (currentStep / 9) * 100;
            progressBar.style.width = progress + '%';
            stepIndicator.textContent = `Step ${currentStep} of 9`;
        }

    
        function showTyping() {
            if (isTyping) return;
            isTyping = true;
            
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message bot';
            typingDiv.id = 'typing-indicator';
            typingDiv.innerHTML = `
                <div class="message-avatar" style="background:linear-gradient(135deg, #6366f1, #4f46e5);box-shadow:0 4px 12px rgba(99,102,241,0.3);">
                    <i class="fas fa-robot" style="color:white;"></i>
                </div>
                <div class="message-content">
                    <div class="typing-indicator" style="background:white;padding:1.25rem;border-radius:16px;box-shadow:0 4px 20px rgba(0,0,0,0.08);border:1px solid #e2e8f0;display:flex;align-items:center;gap:0.5rem;">
                        <div class="typing-dot" style="width:8px;height:8px;background:#6366f1;border-radius:50%;animation:typing 1.4s infinite ease-in-out;"></div>
                        <div class="typing-dot" style="width:8px;height:8px;background:#6366f1;border-radius:50%;animation:typing 1.4s infinite ease-in-out;animation-delay:0.2s;"></div>
                        <div class="typing-dot" style="width:8px;height:8px;background:#6366f1;border-radius:50%;animation:typing 1.4s infinite ease-in-out;animation-delay:0.4s;"></div>
                        <span style="color:#64748b;font-size:0.9rem;margin-left:0.5rem;">Typing...</span>
                    </div>
                </div>
            `;
            chatMessages.appendChild(typingDiv);
            scrollToBottom();
        }

        
        function hideTyping() {
            const typingIndicator = document.getElementById('typing-indicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
            isTyping = false;
        }

    
        function addBotMessage(text, options = null, customContent = null) {
            hideTyping();
            
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message bot';
            
            let content = `
                <div class="message-avatar" style="background:linear-gradient(135deg, #6366f1, #4f46e5);box-shadow:0 4px 12px rgba(99,102,241,0.3);">
                    <i class="fas fa-robot" style="color:white;"></i>
                </div>
                <div class="message-content">
                    <div class="message-text" style="background:white;padding:1.25rem;border-radius:16px;box-shadow:0 4px 20px rgba(0,0,0,0.08);border:1px solid #e2e8f0;font-size:1.05rem;line-height:1.6;color:#1e293b;">${text}</div>
            `;
            
            if (customContent) {
                content += customContent;
            }
            
            if (options) {
                content += '<div class="message-options" style="display:flex;flex-direction:column;gap:0.75rem;margin-top:1rem;">';
                options.forEach(option => {
                    content += `<button class="option-btn" onclick="selectOption('${option.value}')" style="background:linear-gradient(135deg, #f8fafc, #e2e8f0);border:2px solid #e2e8f0;color:#1e293b;padding:1rem 1.5rem;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;text-align:left;box-shadow:0 2px 8px rgba(0,0,0,0.05);">${option.text}</button>`;
                });
                content += '</div>';
            }
            
            content += '</div>';
            messageDiv.innerHTML = content;
            chatMessages.appendChild(messageDiv);
            smoothScrollToBottom();
        }

        
        function addUserMessage(text) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message user';
            messageDiv.innerHTML = `
                <div class="message-avatar" style="background:linear-gradient(135deg, #10b981, #059669);box-shadow:0 4px 12px rgba(16,185,129,0.3);">
                    <i class="fas fa-user" style="color:white;"></i>
                </div>
                <div class="message-content">
                    <div class="message-text" style="background:linear-gradient(135deg, #f0fdf4, #dcfce7);border:1px solid #bbf7d0;padding:1.25rem;border-radius:16px;box-shadow:0 4px 20px rgba(0,0,0,0.08);font-size:1.05rem;line-height:1.6;color:#1e293b;">${text}</div>
                </div>
            `;
            chatMessages.appendChild(messageDiv);
            smoothScrollToBottom();
        }

        
        function scrollToBottom() {
            const chatBody = document.querySelector('.chat-body');
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        function smoothScrollToBottom() {
            const chatBody = document.querySelector('.chat-body');
            chatBody.scrollTo({
                top: chatBody.scrollHeight,
                behavior: 'smooth'
            });
        }

        function scrollToForm() {
            setTimeout(() => {
                smoothScrollToBottom();
            }, 100);
        }

        
        function showWelcomeMessage() {
            setTimeout(() => {
                addBotMessage(
                    "Welcome to the UK Visa Application Assistant! I'll guide you through the application process step by step. Let's start with the basics.",
                    [
                        { text: "Start Application", value: "start" }
                    ]
                );
            }, 500);
        }

    
        function selectOption(value) {
            const optionButtons = document.querySelectorAll('.option-btn');
            optionButtons.forEach(btn => btn.classList.remove('selected'));
            event.target.classList.add('selected');
            
            userResponses[`step${currentStep}`] = value;
            
            if (currentStep === 2 && window._visaTypesList) {
                const visa = window._visaTypesList.find(v => v.name.toLowerCase().replace(/\s+/g, '_') === value);
                if (visa) {
                    addUserMessage(
                        `<div style='padding:1.5rem;background:linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);border-radius:16px;border:1px solid #e2e8f0;box-shadow:0 4px 20px rgba(0,0,0,0.08);margin:1rem 0;'>
                            <div style='display:flex;align-items:center;justify-content:center;margin-bottom:1rem;'>
                                <div style='background:linear-gradient(135deg, #10b981, #059669);color:white;padding:0.5rem 1rem;border-radius:50px;font-size:0.9rem;font-weight:600;margin-right:0.75rem;box-shadow:0 2px 8px rgba(16,185,129,0.3);'>
                                    <i class="fas fa-check" style='margin-right:0.5rem;'></i>Selected
                                </div>
                                <div style='font-size:1.4rem;font-weight:800;color:#1e293b;text-align:center;'>${visa.name}</div>
                            </div>
                            ${visa.description ? `<div style='color:#64748b;margin-bottom:1rem;font-size:1rem;line-height:1.6;background:white;padding:1rem;border-radius:12px;border-left:4px solid #6366f1;box-shadow:0 2px 8px rgba(0,0,0,0.05);'>${visa.description}</div>` : ''}
                            <div style='display:flex;justify-content:space-between;align-items:center;background:white;padding:1rem;border-radius:12px;margin-bottom:1rem;box-shadow:0 2px 8px rgba(0,0,0,0.05);'>
                                <div style='font-size:1.1rem;color:#374151;font-weight:600;'>Base Price:</div>
                                <div style='font-size:1.3rem;color:#059669;font-weight:800;'>${visa.basePrice || 'N/A'}</div>
                            </div>
                            <div style='background:linear-gradient(135deg, #fef3c7, #fde68a);color:#92400e;padding:1rem;border-radius:12px;border-left:4px solid #f59e0b;font-size:0.95rem;font-weight:500;line-height:1.5;'>
                                <i class="fas fa-info-circle" style='margin-right:0.5rem;'></i>
                                This is just the base price. Based on your selection, the price may increase.
                            </div>
                        </div>`
                    );
                    userResponses.selectedVisa = visa;
                    updateVisaSummary();
                } else {
                    
                    addUserMessage(`Selected: ${event.target.textContent}`);
                }
            } else {
                addUserMessage(event.target.textContent);
            }
            if (currentStep > 2) {
                updateVisaSummary();
            }
            setTimeout(() => {
                processStep();
            }, 1000);
        }

        
        function handleTextInput(inputValue) {
            userResponses[`step${currentStep}`] = inputValue;
            addUserMessage(inputValue);
            
            setTimeout(() => {
                processStep();
            }, 1000);
        }

        
        function processStep() {
            showTyping();
            setTimeout(() => {
                updateVisaSummary();
                switch(currentStep) {
                    case 1:
                        handleStep1();
                        break;
                    case 2:
                        handleStep2();
                        break;
                    case 3:
                        handleStep3();
                        break;
                    case 4:
                        handleStep4();
                        break;
                    case 5:
                        handleStep5();
                        break;
                    case 6:
                        handleStep6();
                        break;
                    case 7:
                        handleStep7();
                        break;
                    case 8:
                        handleStep8();
                        break;
                    case 9:
                        handleStep9();
                        break;
                }
            }, 1500);
        }

       
        function handleStep1() {
            currentStep = 2;
            updateProgress();
            
            const visaTypes = loadVisaTypesFromAdmin();
            
            window._visaTypesList = visaTypes;
            const options = visaTypes.map(visa => ({
                text: visa.name,
                value: visa.name.toLowerCase().replace(/\s+/g, '_')
            }));
            
            addBotMessage(
                "Which visa are you applying for? Please select from the list below:",
                options
            );
        }
        function handleStep2() {
            currentStep = 3;
            updateProgress();
            
            const customContent = `
                <div class="message-options" style="display:flex;flex-direction:column;gap:0.75rem;margin-top:1rem;">
                    <button class="option-btn" onclick="selectOption('no')" style="background:linear-gradient(135deg, #f8fafc, #e2e8f0);border:2px solid #e2e8f0;color:#1e293b;padding:1rem 1.5rem;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;text-align:left;box-shadow:0 2px 8px rgba(0,0,0,0.05);">No</button>
                    <button class="option-btn" onclick="showDependentsForm()" style="background:linear-gradient(135deg, #f8fafc, #e2e8f0);border:2px solid #e2e8f0;color:#1e293b;padding:1rem 1.5rem;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;text-align:left;box-shadow:0 2px 8px rgba(0,0,0,0.05);">Yes - click to add partner/children/adult relatives</button>
                </div>
                <div id="dependentsForm" style="display:none;margin-top:1rem;background:white;padding:1.5rem;border-radius:16px;box-shadow:0 4px 20px rgba(0,0,0,0.08);border:1px solid #e2e8f0;">
                    <h4 style="margin-bottom:1rem;color:#1e293b;font-weight:600;">Dependents Information</h4>
                    <div style="background:linear-gradient(135deg, #fef3c7, #fde68a);border:1px solid #f59e0b;padding:1rem;border-radius:12px;margin-bottom:1rem;">
                        <div style="display:flex;align-items:center;gap:0.5rem;margin-bottom:0.5rem;">
                            <i class="fas fa-info-circle" style="color:#f59e0b;"></i>
                            <strong style="color:#92400e;">Cost Information</strong>
                        </div>
                        <p style="color:#92400e;margin:0;font-size:0.95rem;">
                            Additional costs will be calculated and displayed for each dependent based on your selected visa type and relationship. The total cost will be updated automatically.
                        </p>
                    </div>
                    <div id="dependentsList" style="margin-bottom:1rem;">
                        <!-- Dependents will be added here -->
                    </div>
                    <div id="totalCostDisplay" style="display:none;">
                        <!-- Total cost will be displayed here -->
                    </div>
                    <button onclick="addDependent()" style="background:linear-gradient(135deg, #10b981, #059669);color:white;padding:0.75rem 1.5rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;margin-bottom:1rem;">
                        <i class="fas fa-plus" style="margin-right:0.5rem;"></i>Add Dependent
                    </button>
                    <button onclick="submitDependentsForm()" style="background:linear-gradient(135deg, #6366f1, #4f46e5);color:white;padding:0.75rem 1.5rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;">Submit Dependents</button>
                </div>
            `;
            
            addBotMessage(
                "Are you including dependents in your application?",
                null,
                customContent
            );
        }

    
        function handleStep3() {
            currentStep = 4;
            updateProgress();
            
            const customContent = `
                <div class="message-options" style="display:flex;flex-direction:column;gap:0.75rem;margin-top:1rem;">
                    <button class="option-btn" onclick="selectOption('no')" style="background:linear-gradient(135deg, #f8fafc, #e2e8f0);border:2px solid #e2e8f0;color:#1e293b;padding:1rem 1.5rem;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;text-align:left;box-shadow:0 2px 8px rgba(0,0,0,0.05);">No</button>
                    <button class="option-btn" onclick="showDeadlineForm()" style="background:linear-gradient(135deg, #f8fafc, #e2e8f0);border:2px solid #e2e8f0;color:#1e293b;padding:1rem 1.5rem;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;text-align:left;box-shadow:0 2px 8px rgba(0,0,0,0.05);">Yes - please provide further details</button>
                </div>
                <div id="deadlineForm" style="display:none;margin-top:1rem;background:white;padding:1.5rem;border-radius:16px;box-shadow:0 4px 20px rgba(0,0,0,0.08);border:1px solid #e2e8f0;">
                    <h4 style="margin-bottom:1rem;color:#1e293b;font-weight:600;">Deadline Details</h4>
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem;">
                        <div>
                            <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Deadline Date</label>
                            <input type="date" id="deadlineDate" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                        </div>
                        <div>
                            <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Reason for Deadline</label>
                            <select id="deadlineReason" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                                <option value="">Select reason</option>
                                <option value="job_start">Job start date</option>
                                <option value="course_start">Course start date</option>
                                <option value="family_event">Family event</option>
                                <option value="business_trip">Business trip</option>
                                <option value="medical_treatment">Medical treatment</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                    <div style="margin-bottom:1rem;">
                        <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Additional Details</label>
                        <textarea id="deadlineDetails" placeholder="Please provide any additional details about your deadline..." style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;min-height:80px;resize:vertical;"></textarea>
                    </div>
                    <button onclick="submitDeadlineForm()" style="background:linear-gradient(135deg, #6366f1, #4f46e5);color:white;padding:0.75rem 1.5rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;">Submit Deadline Details</button>
                </div>
            `;
            
            addBotMessage(
                "Is there a deadline to meet for your visa application?",
                null,
                customContent
            );
        }

    
        function handleStep4() {
            currentStep = 5;
            updateProgress();
            
            const customContent = `
                <div class="message-options" style="display:flex;flex-direction:column;gap:0.75rem;margin-top:1rem;">
                    <button class="option-btn" onclick="selectOption('no')" style="background:linear-gradient(135deg, #f8fafc, #e2e8f0);border:2px solid #e2e8f0;color:#1e293b;padding:1rem 1.5rem;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;text-align:left;box-shadow:0 2px 8px rgba(0,0,0,0.05);">No</button>
                    <button class="option-btn" onclick="showIssuesForm()" style="background:linear-gradient(135deg, #f8fafc, #e2e8f0);border:2px solid #e2e8f0;color:#1e293b;padding:1rem 1.5rem;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;text-align:left;box-shadow:0 2px 8px rgba(0,0,0,0.05);">Yes - please provide further details</button>
                </div>
                <div id="issuesForm" style="display:none;margin-top:1rem;background:white;padding:1.5rem;border-radius:16px;box-shadow:0 4px 20px rgba(0,0,0,0.08);border:1px solid #e2e8f0;">
                    <h4 style="margin-bottom:1rem;color:#1e293b;font-weight:600;">Previous Issues Details</h4>
                    <div style="margin-bottom:1rem;">
                        <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Type of Issue</label>
                        <select id="issueType" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                            <option value="">Select issue type</option>
                            <option value="visa_refusal">Visa refusal</option>
                            <option value="overstay">Overstay</option>
                            <option value="criminal_record">Criminal record</option>
                            <option value="health_issues">Health issues</option>
                            <option value="financial_issues">Financial issues</option>
                            <option value="documentation_issues">Documentation issues</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem;">
                        <div>
                            <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Date of Issue</label>
                            <input type="date" id="issueDate" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                        </div>
                        <div>
                            <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Country</label>
                            <input type="text" id="issueCountry" placeholder="e.g., UK, USA, etc." style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                        </div>
                    </div>
                    <div style="margin-bottom:1rem;">
                        <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Description of Issue</label>
                        <textarea id="issueDescription" placeholder="Please provide a detailed description of the issue..." style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;min-height:80px;resize:vertical;"></textarea>
                    </div>
                    <div style="margin-bottom:1rem;">
                        <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Resolution Status</label>
                        <select id="issueResolution" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                            <option value="">Select status</option>
                            <option value="resolved">Resolved</option>
                            <option value="pending">Pending</option>
                            <option value="appealed">Appealed</option>
                            <option value="ongoing">Ongoing</option>
                        </select>
                    </div>
                    <button onclick="submitIssuesForm()" style="background:linear-gradient(135deg, #6366f1, #4f46e5);color:white;padding:0.75rem 1.5rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;">Submit Issue Details</button>
                </div>
            `;
            
            addBotMessage(
                "Have there been any refusal or any other issues you need to let us know about?",
                null,
                customContent
            );
        }

        
        function handleStep5() {
            currentStep = 6;
            updateProgress();
            
            const customContent = `
                <div class="message-options" style="display:flex;flex-direction:column;gap:0.75rem;margin-top:1rem;">
                    <button class="option-btn" onclick="selectOption('no')" style="background:linear-gradient(135deg, #f8fafc, #e2e8f0);border:2px solid #e2e8f0;color:#1e293b;padding:1rem 1.5rem;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;text-align:left;box-shadow:0 2px 8px rgba(0,0,0,0.05);">No</button>
                    <button class="option-btn" onclick="showPreviousVisaForm()" style="background:linear-gradient(135deg, #f8fafc, #e2e8f0);border:2px solid #e2e8f0;color:#1e293b;padding:1rem 1.5rem;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;text-align:left;box-shadow:0 2px 8px rgba(0,0,0,0.05);">Yes > great, please provide details</button>
                </div>
                <div id="previousVisaForm" style="display:none;margin-top:1rem;background:white;padding:1.5rem;border-radius:16px;box-shadow:0 4px 20px rgba(0,0,0,0.08);border:1px solid #e2e8f0;">
                    <h4 style="margin-bottom:1rem;color:#1e293b;font-weight:600;">Previous UK Visa Details</h4>
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem;">
                        <div>
                            <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Visa Type</label>
                            <select id="previousVisaType" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                                <option value="">Select visa type</option>
                                <option value="tourist">Tourist Visa</option>
                                <option value="business">Business Visa</option>
                                <option value="student">Student Visa</option>
                                <option value="work">Work Visa</option>
                                <option value="family">Family Visa</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div>
                            <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Issue Date</label>
                            <input type="date" id="previousVisaIssueDate" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                        </div>
                    </div>
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem;">
                        <div>
                            <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Expiry Date</label>
                            <input type="date" id="previousVisaExpiryDate" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                        </div>
                        <div>
                            <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Visa Number</label>
                            <input type="text" id="previousVisaNumber" placeholder="Enter visa number if known" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                        </div>
                    </div>
                    <div style="margin-bottom:1rem;">
                        <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Purpose of Previous Visit</label>
                        <textarea id="previousVisaPurpose" placeholder="What was the purpose of your previous UK visit?" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;min-height:80px;resize:vertical;"></textarea>
                    </div>
                    <div style="margin-bottom:1rem;">
                        <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Any Issues with Previous Visa?</label>
                        <select id="previousVisaIssues" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                            <option value="no">No issues</option>
                            <option value="overstay">Overstayed</option>
                            <option value="conditions_breach">Breached conditions</option>
                            <option value="other">Other issues</option>
                        </select>
                    </div>
                    <button onclick="submitPreviousVisaForm()" style="background:linear-gradient(135deg, #6366f1, #4f46e5);color:white;padding:0.75rem 1.5rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;">Submit Previous Visa Details</button>
                </div>
            `;
            
            addBotMessage(
                "Have you been issued a UK visa before?",
                null,
                customContent
            );
        }

        
        function handleStep6() {
            currentStep = 7;
            updateProgress();
            
            const customContent = `
                <div class="message-options" style="display:flex;flex-direction:column;gap:0.75rem;margin-top:1rem;">
                    <button class="option-btn" onclick="selectOption('no')" style="background:linear-gradient(135deg, #f8fafc, #e2e8f0);border:2px solid #e2e8f0;color:#1e293b;padding:1rem 1.5rem;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;text-align:left;box-shadow:0 2px 8px rgba(0,0,0,0.05);">No</button>
                    <button class="option-btn" onclick="showSponsorForm()" style="background:linear-gradient(135deg, #f8fafc, #e2e8f0);border:2px solid #e2e8f0;color:#1e293b;padding:1rem 1.5rem;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;text-align:left;box-shadow:0 2px 8px rgba(0,0,0,0.05);">Yes > please provide details</button>
                </div>
                <div id="sponsorForm" style="display:none;margin-top:1rem;background:white;padding:1.5rem;border-radius:16px;box-shadow:0 4px 20px rgba(0,0,0,0.08);border:1px solid #e2e8f0;">
                    <h4 style="margin-bottom:1rem;color:#1e293b;font-weight:600;">Sponsor Details</h4>
                    <div style="margin-bottom:1rem;">
                        <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Sponsor Type</label>
                        <select id="sponsorType" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                            <option value="">Select sponsor type</option>
                            <option value="employer">Employer</option>
                            <option value="relative">Relative</option>
                            <option value="third_party">Third-party</option>
                            <option value="not_sure">Not sure</option>
                        </select>
                    </div>
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem;">
                        <div>
                            <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Sponsor Name</label>
                            <input type="text" id="sponsorName" placeholder="Enter sponsor's full name" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                        </div>
                        <div>
                            <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Sponsor Email</label>
                            <input type="email" id="sponsorEmail" placeholder="Enter sponsor's email" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                        </div>
                    </div>
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem;">
                        <div>
                            <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Sponsor Phone</label>
                            <input type="tel" id="sponsorPhone" placeholder="Enter sponsor's phone number" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                        </div>
                        <div>
                            <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Sponsor Address</label>
                            <input type="text" id="sponsorAddress" placeholder="Enter sponsor's address" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                        </div>
                    </div>
                    <div style="margin-bottom:1rem;">
                        <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Sponsorship Details</label>
                        <textarea id="sponsorDetails" placeholder="Please provide details about the sponsorship arrangement..." style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;min-height:80px;resize:vertical;"></textarea>
                    </div>
                    <button onclick="submitSponsorForm()" style="background:linear-gradient(135deg, #6366f1, #4f46e5);color:white;padding:0.75rem 1.5rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;">Submit Sponsor Details</button>
                </div>
            `;
            
            addBotMessage(
                "Do you have a sponsor? If Yes, please provide a bit more information.",
                null,
                customContent
            );
        }

       
        function handleStep7() {
            currentStep = 8;
            updateProgress();
            
            const packages = loadPackagesFromAdmin();
            
           
            let packageType = 'basic';
            if (userResponses.step2 === 'yes' || userResponses.step4 === 'yes') {
                packageType = 'premium';
            }
            if (userResponses.step3 === 'yes') {
                packageType = 'premium_plus';
            }
            
           
            const availablePackages = Object.keys(packages);
            if (!packages[packageType] && availablePackages.length > 0) {
                packageType = availablePackages[0];
            }
            
            const selectedPackage = packages[packageType];
            
            if (selectedPackage) {
                const packageContent = `
                    <div class="package-display">
                        <div class="package-title">${selectedPackage.name}</div>
                        <div class="package-price">${selectedPackage.price}</div>
                        <ul class="package-features">
                            ${selectedPackage.features.map(feature => `<li>${feature}</li>`).join('')}
                        </ul>
                    </div>
                    <div class="message-options">
                        <button class="option-btn" onclick="selectOption('continue')">Continue with this package</button>
                        <button class="option-btn" onclick="selectOption('change')">Change package</button>
                    </div>
                `;
                
                addBotMessage(
                    "Based on your selections, here's your recommended package:",
                    null,
                    packageContent
                );
            } else {
                addBotMessage(
                    "No packages are currently available. Please contact our support team.",
                    [
                        { text: "Contact Support", value: "support" }
                    ]
                );
            }
        }

        
        function handleStep8() {
            currentStep = 9;
            updateProgress();
            
            const settings = loadSettingsFromAdmin();
            const defaultCredits = settings.defaultCredits;
            
            const creditsContent = `
                <div style="background:linear-gradient(135deg, #f0fdf4, #dcfce7);border:1px solid #bbf7d0;padding:1.5rem;border-radius:16px;margin-bottom:1rem;box-shadow:0 4px 20px rgba(0,0,0,0.08);">
                    <div style="display:flex;align-items:center;justify-content:center;margin-bottom:1rem;">
                        <div style="background:linear-gradient(135deg, #10b981, #059669);color:white;padding:0.5rem 1rem;border-radius:50px;font-size:0.9rem;font-weight:600;margin-right:0.75rem;box-shadow:0 2px 8px rgba(16,185,129,0.3);">
                            <i class="fas fa-gift" style="margin-right:0.5rem;"></i>Free
                        </div>
                        <div style="font-size:1.4rem;font-weight:800;color:#1e293b;text-align:center;">${defaultCredits} Credits</div>
                    </div>
                    <div style="color:#64748b;text-align:center;font-size:1rem;line-height:1.6;">Automatically allocated to your account</div>
                </div>
                <div class="message-options" style="display:flex;flex-direction:column;gap:0.75rem;margin-top:1rem;">
                    <button class="option-btn" onclick="selectOption('no')" style="background:linear-gradient(135deg, #f8fafc, #e2e8f0);border:2px solid #e2e8f0;color:#1e293b;padding:1rem 1.5rem;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;text-align:left;box-shadow:0 2px 8px rgba(0,0,0,0.05);">No, ${defaultCredits} credits are enough</button>
                    <button class="option-btn" onclick="showCreditsPackages()" style="background:linear-gradient(135deg, #f8fafc, #e2e8f0);border:2px solid #e2e8f0;color:#1e293b;padding:1rem 1.5rem;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;text-align:left;box-shadow:0 2px 8px rgba(0,0,0,0.05);">Yes, I want to buy more</button>
                </div>
                <div id="creditsPackages" style="display:none;margin-top:1rem;">
                    <h4 style="margin-bottom:1rem;color:#1e293b;font-weight:600;">Additional Credit Packages</h4>
                    <div style="display:grid;grid-template-columns:1fr;gap:1rem;margin-bottom:1rem;">
                        ${creditPackages.slice(1).map((pkg, index) => `
                            <div style="background:white;padding:1.5rem;border-radius:16px;border:2px solid #e2e8f0;box-shadow:0 4px 20px rgba(0,0,0,0.08);cursor:pointer;transition:all 0.3s ease;" onclick="selectCreditPackage(${index + 1})">
                                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:0.5rem;">
                                    <div style="font-size:1.2rem;font-weight:700;color:#1e293b;">${pkg.credits} Credits</div>
                                    <div style="font-size:1.3rem;font-weight:800;color:#059669;">${pkg.price}</div>
                                </div>
                                <div style="color:#64748b;font-size:0.95rem;">${pkg.description}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            addBotMessage(
                `You are allocated ${defaultCredits} credits automatically. Do you wish to buy more?`,
                null,
                creditsContent
            );
        }

        
        function handleStep9() {
            updateProgress();
            
            
            let totalCost = 0;
            let serviceDetails = [];
            
            if (userResponses.selectedVisa) {
                totalCost += userResponses.selectedVisa.basePrice || 0;
                serviceDetails.push(`${userResponses.selectedVisa.name}: ${userResponses.selectedVisa.basePrice || 0}`);
            }
            
            if (userResponses.selectedCreditPackage) {
                const creditPrice = parseInt(userResponses.selectedCreditPackage.price.replace('', '')) || 0;
                totalCost += creditPrice;
                serviceDetails.push(`${userResponses.selectedCreditPackage.credits} Credits: ${userResponses.selectedCreditPackage.price}`);
            }
            
            if (userResponses.selectedPackage) {
                const packagePrice = parseInt(userResponses.selectedPackage.price.replace('', '')) || 0;
                totalCost += packagePrice;
                serviceDetails.push(`${userResponses.selectedPackage.name}: ${userResponses.selectedPackage.price}`);
            }
            
            const purchaseContent = `
                <div style="background:white;padding:1.5rem;border-radius:16px;box-shadow:0 4px 20px rgba(0,0,0,0.08);border:1px solid #e2e8f0;">
                    <h4 style="margin-bottom:1rem;color:#1e293b;font-weight:600;">Complete Your Purchase</h4>
                    
                    <!-- Order Summary -->
                    <div style="background:linear-gradient(135deg, #f8fafc, #e2e8f0);padding:1rem;border-radius:12px;margin-bottom:1.5rem;border:1px solid #e2e8f0;">
                        <h5 style="margin-bottom:0.75rem;color:#1e293b;font-weight:600;font-size:1rem;">Order Summary</h5>
                        ${serviceDetails.map(detail => `<div style="color:#64748b;font-size:0.9rem;margin-bottom:0.25rem;"> ${detail}</div>`).join('')}
                        <div style="border-top:1px solid #e2e8f0;margin-top:0.75rem;padding-top:0.75rem;display:flex;justify-content:space-between;align-items:center;">
                            <span style="font-weight:600;color:#1e293b;">Total:</span>
                            <span style="font-size:1.2rem;font-weight:700;color:#059669;">${totalCost}</span>
                        </div>
                    </div>
                    
                    <!-- Personal Information -->
                    <div style="margin-bottom:1.5rem;">
                        <h5 style="margin-bottom:1rem;color:#1e293b;font-weight:600;font-size:1rem;">Personal Information</h5>
                        <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem;">
                            <div>
                                <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Full Name *</label>
                                <input type="text" id="fullName" placeholder="Enter your full name" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                            </div>
                            <div>
                                <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Email Address *</label>
                                <input type="email" id="email" placeholder="Enter your email address" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                            </div>
                        </div>
                        <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem;">
                            <div>
                                <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Contact Number *</label>
                                <input type="tel" id="phone" placeholder="Enter your contact number" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                            </div>
                            <div>
                                <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Preferred Contact Time</label>
                                <select id="contactTime" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                                    <option value="">Select preferred time</option>
                                    <option value="morning">Morning (9 AM - 12 PM)</option>
                                    <option value="afternoon">Afternoon (12 PM - 5 PM)</option>
                                    <option value="evening">Evening (5 PM - 8 PM)</option>
                                    <option value="anytime">Anytime</option>
                                </select>
                            </div>
                        </div>
                        <div>
                            <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Additional Notes</label>
                            <textarea id="additionalNotes" placeholder="Any additional information or special requirements..." style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;min-height:80px;resize:vertical;"></textarea>
                        </div>
                    </div>
                    
                    <!-- Payment Method -->
                    <div style="margin-bottom:1.5rem;">
                        <h5 style="margin-bottom:1rem;color:#1e293b;font-weight:600;font-size:1rem;">Payment Method</h5>
                        <div style="display:flex;gap:1rem;margin-bottom:1rem;">
                            <button onclick="selectPaymentMethod('paypal')" id="paypalBtn" style="flex:1;background:linear-gradient(135deg, #0070ba, #1546a0);color:white;padding:1rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;display:flex;align-items:center;justify-content:center;gap:0.5rem;">
                                <i class="fab fa-paypal" style="font-size:1.2rem;"></i>
                                PayPal
                            </button>
                            <button onclick="selectPaymentMethod('card')" id="cardBtn" style="flex:1;background:linear-gradient(135deg, #f8fafc, #e2e8f0);color:#1e293b;padding:1rem;border:2px solid #e2e8f0;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;display:flex;align-items:center;justify-content:center;gap:0.5rem;">
                                <i class="fas fa-credit-card"></i>
                                Debit/Credit Card
                            </button>
                        </div>
                        
                        <!-- Hidden input to track selected payment method -->
                        <input type="hidden" id="selectedPaymentMethod" value="paypal">
                        
                        <!-- PayPal Options -->
                        <div id="paypalOptions" style="display:none;background:#f8fafc;padding:1rem;border-radius:8px;border:1px solid #e2e8f0;">
                            <div style="margin-bottom:1rem;">
                                <label style="display:flex;align-items:center;gap:0.5rem;cursor:pointer;font-weight:500;color:#374151;">
                                    <input type="radio" name="paypalOption" value="guest" checked style="margin:0;">
                                    <span>Pay as Guest (No PayPal account required)</span>
                                </label>
                            </div>
                            <div>
                                <label style="display:flex;align-items:center;gap:0.5rem;cursor:pointer;font-weight:500;color:#374151;">
                                    <input type="radio" name="paypalOption" value="login" style="margin:0;">
                                    <span>Pay with PayPal Account</span>
                                </label>
                            </div>
                            <!-- PayPal Button Container -->
                            <div id="paypal-button-container" style="margin-top:1rem;display:none;"></div>
                        </div>
                        
                        <!-- Credit Card Form -->
                        <div id="cardForm" style="display:none;">
                            <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem;">
                                <div>
                                    <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Card Number</label>
                                    <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                                </div>
                                <div>
                                    <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Cardholder Name</label>
                                    <input type="text" id="cardholderName" placeholder="John Doe" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                                </div>
                            </div>
                            <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:1rem;">
                                <div>
                                    <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Expiry Month</label>
                                    <select id="expiryMonth" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                                        <option value="">MM</option>
                                        ${Array.from({length: 12}, (_, i) => `<option value="${String(i + 1).padStart(2, '0')}">${String(i + 1).padStart(2, '0')}</option>`).join('')}
                                    </select>
                                </div>
                                <div>
                                    <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Expiry Year</label>
                                    <select id="expiryYear" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                                        <option value="">YYYY</option>
                                        ${Array.from({length: 10}, (_, i) => `<option value="${new Date().getFullYear() + i}">${new Date().getFullYear() + i}</option>`).join('')}
                                    </select>
                                </div>
                                <div>
                                    <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">CVV</label>
                                    <input type="text" id="cvv" placeholder="123" maxlength="4" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div style="display:flex;gap:1rem;margin-top:1.5rem;">
                        <button onclick="processPayment()" style="background:linear-gradient(135deg, #6366f1, #4f46e5);color:white;padding:1rem 2rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;flex:1;">
                            <i class="fas fa-lock" style="margin-right:0.5rem;"></i>Pay Securely ${totalCost}
                        </button>
                        <button onclick="handleEmailDetails()" style="background:linear-gradient(135deg, #f8fafc, #e2e8f0);color:#1e293b;padding:1rem 2rem;border:2px solid #e2e8f0;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;flex:1;">
                            <i class="fas fa-envelope" style="margin-right:0.5rem;"></i>Email Details
                        </button>
                    </div>
                </div>
            `;
            
            addBotMessage(
                "Do you wish to purchase? Please provide your details and select payment method below:",
                null,
                purchaseContent
            );
            
            
            setTimeout(() => {
                initializePaymentForm();
            }, 100);
        }

    
        function handleInputKeyPress(event, value) {
            if (event.key === 'Enter' && value.trim()) {
                handleTextInput(value.trim());
            }
        }

    
        function selectPaymentMethod(method) {
            // Find the payment form container
            const chatMessages = document.getElementById('chatMessages');
            let paymentFormContainer = null;
            
            if (chatMessages) {
                const botMessages = chatMessages.querySelectorAll('.message.bot');
                for (let i = botMessages.length - 1; i >= 0; i--) {
                    const message = botMessages[i];
                    if (message.querySelector('#fullName')) {
                        paymentFormContainer = message;
                        break;
                    }
                }
            }
            
            // Fallback to global search if not found in container
            const paypalBtn = paymentFormContainer ? paymentFormContainer.querySelector('#paypalBtn') : document.getElementById('paypalBtn');
            const cardBtn = paymentFormContainer ? paymentFormContainer.querySelector('#cardBtn') : document.getElementById('cardBtn');
            const paypalOptions = paymentFormContainer ? paymentFormContainer.querySelector('#paypalOptions') : document.getElementById('paypalOptions');
            const cardForm = paymentFormContainer ? paymentFormContainer.querySelector('#cardForm') : document.getElementById('cardForm');
            const selectedMethodInput = paymentFormContainer ? paymentFormContainer.querySelector('#selectedPaymentMethod') : document.getElementById('selectedPaymentMethod');
            
            if (method === 'paypal') {
                if (paypalBtn) {
                    paypalBtn.style.background = 'linear-gradient(135deg, #0070ba, #1546a0)';
                    paypalBtn.style.color = 'white';
                    paypalBtn.style.border = 'none';
                }
                if (cardBtn) {
                    cardBtn.style.background = 'linear-gradient(135deg, #f8fafc, #e2e8f0)';
                    cardBtn.style.color = '#1e293b';
                    cardBtn.style.border = '2px solid #e2e8f0';
                }
                if (paypalOptions) {
                    paypalOptions.style.display = 'block';
                }
                if (cardForm) {
                    cardForm.style.display = 'none';
                }
                if (selectedMethodInput) {
                    selectedMethodInput.value = 'paypal';
                }
                
                // Show PayPal button container
                const paypalContainer = paymentFormContainer ? paymentFormContainer.querySelector('#paypal-button-container') : document.getElementById('paypal-button-container');
                if (paypalContainer) {
                    paypalContainer.style.display = 'block';
                }
            } else {
                if (cardBtn) {
                    cardBtn.style.background = 'linear-gradient(135deg, #6366f1, #4f46e5)';
                    cardBtn.style.color = 'white';
                    cardBtn.style.border = 'none';
                }
                if (paypalBtn) {
                    paypalBtn.style.background = 'linear-gradient(135deg, #f8fafc, #e2e8f0)';
                    paypalBtn.style.color = '#1e293b';
                    paypalBtn.style.border = '2px solid #e2e8f0';
                }
                if (cardForm) {
                    cardForm.style.display = 'block';
                }
                if (paypalOptions) {
                    paypalOptions.style.display = 'none';
                }
                if (selectedMethodInput) {
                    selectedMethodInput.value = 'card';
                }
                
                // Hide PayPal button container
                const paypalContainer = paymentFormContainer ? paymentFormContainer.querySelector('#paypal-button-container') : document.getElementById('paypal-button-container');
                if (paypalContainer) {
                    paypalContainer.style.display = 'none';
                }
            }
        }

        function processPayment() {
            // Find the most recent bot message that contains the payment form
            const chatMessages = document.getElementById('chatMessages');
            if (!chatMessages) {
                alert('Chat container not found. Please refresh the page.');
                return;
            }
            
            // Get all bot messages and find the one with the payment form
            const botMessages = chatMessages.querySelectorAll('.message.bot');
            let paymentFormContainer = null;
            
            // Search from the most recent message backwards
            for (let i = botMessages.length - 1; i >= 0; i--) {
                const message = botMessages[i];
                if (message.querySelector('#fullName')) {
                    paymentFormContainer = message;
                    break;
                }
            }
            
            if (!paymentFormContainer) {
                alert('Payment form not found. Please make sure the payment form is visible.');
                console.error('Payment form container not found');
                return;
            }
            
            
            const fullNameEl = paymentFormContainer.querySelector('#fullName');
            const emailEl = paymentFormContainer.querySelector('#email');
            const phoneEl = paymentFormContainer.querySelector('#phone');
            const contactTimeEl = paymentFormContainer.querySelector('#contactTime');
            const additionalNotesEl = paymentFormContainer.querySelector('#additionalNotes');
            
            // Check if elements exist
            if (!fullNameEl || !emailEl || !phoneEl) {
                alert('Payment form fields not found. Please refresh the page and try again.');
                console.error('Form elements not found:', { 
                    fullNameEl: !!fullNameEl, 
                    emailEl: !!emailEl, 
                    phoneEl: !!phoneEl,
                    containerHTML: paymentFormContainer.innerHTML.substring(0, 500)
                });
                return;
            }
            
            
            const isVisible = (el) => {
                if (!el) return false;
                const style = window.getComputedStyle(el);
                return style.display !== 'none' && style.visibility !== 'hidden' && style.opacity !== '0';
            };
            
            if (!isVisible(fullNameEl) || !isVisible(emailEl) || !isVisible(phoneEl)) {
                console.warn('Some form fields may be hidden:', {
                    fullNameVisible: isVisible(fullNameEl),
                    emailVisible: isVisible(emailEl),
                    phoneVisible: isVisible(phoneEl)
                });
            }
            
           
            const getInputValue = (el) => {
                if (!el) return '';
                
                if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA' || el.tagName === 'SELECT') {
                    const val = el.value || '';
                    return val.toString().trim();
                }
                return '';
            };
            
            const fullName = getInputValue(fullNameEl);
            const email = getInputValue(emailEl);
            const phone = getInputValue(phoneEl);
            const contactTime = contactTimeEl ? getInputValue(contactTimeEl) : '';
            const additionalNotes = additionalNotesEl ? getInputValue(additionalNotesEl) : '';
            
            console.log('Form values (raw):', {
                fullNameElType: fullNameEl.type,
                fullNameElValue: fullNameEl.value,
                fullNameElValueType: typeof fullNameEl.value,
                emailElType: emailEl.type,
                emailElValue: emailEl.value,
                emailElValueType: typeof emailEl.value,
                phoneElType: phoneEl.type,
                phoneElValue: phoneEl.value,
                phoneElValueType: typeof phoneEl.value,
                fullName,
                email,
                phone,
                contactTime,
                additionalNotes,
                fullNameLength: fullName.length,
                emailLength: email.length,
                phoneLength: phone.length,
                fullNameIsEmpty: !fullName || fullName.length === 0,
                emailIsEmpty: !email || email.length === 0,
                phoneIsEmpty: !phone || phone.length === 0
            });
            
           
            const missingFields = [];
            if (!fullName || fullName.length === 0) {
                missingFields.push('Full Name');
            }
            if (!email || email.length === 0) {
                missingFields.push('Email Address');
            }
            if (!phone || phone.length === 0) {
                missingFields.push('Contact Number');
            }
            
            if (missingFields.length > 0) {
                alert(`Please fill in all required fields:\n\n ${missingFields.join('\n ')}\n\nAll fields marked with * are required.`);
                // Highlight missing fields
                if (!fullName || fullName.length === 0) {
                    fullNameEl.style.borderColor = '#ef4444';
                    fullNameEl.focus();
                }
                if (!email || email.length === 0) {
                    emailEl.style.borderColor = '#ef4444';
                    if (fullName && fullName.length > 0) emailEl.focus();
                }
                if (!phone || phone.length === 0) {
                    phoneEl.style.borderColor = '#ef4444';
                    if (fullName && fullName.length > 0 && email && email.length > 0) phoneEl.focus();
                }
                return;
            }
            
            // Reset border colors if validation passes
            fullNameEl.style.borderColor = '#d1d5db';
            emailEl.style.borderColor = '#d1d5db';
            phoneEl.style.borderColor = '#d1d5db';
            
            // Validate email format
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('Please enter a valid email address.');
                emailEl.style.borderColor = '#ef4444';
                emailEl.focus();
                return;
            }
            
            // Validate phone format (basic check - at least 10 digits)
            const phoneDigits = phone.replace(/\D/g, '');
            if (phoneDigits.length < 10) {
                alert('Please enter a valid phone number (at least 10 digits).');
                phoneEl.style.borderColor = '#ef4444';
                phoneEl.focus();
                return;
            }
            
            const selectedMethodInput = paymentFormContainer.querySelector('#selectedPaymentMethod');
            const isPayPalSelected = selectedMethodInput && selectedMethodInput.value === 'paypal';
            
            if (isPayPalSelected) {
                const paypalOptionElement = paymentFormContainer.querySelector('input[name="paypalOption"]:checked');
                if (!paypalOptionElement) {
                    alert('Please select a PayPal payment option.');
                    return;
                }
                const paypalOption = paypalOptionElement.value;
                processPayPalPayment(paypalOption);
            } else {
                const cardNumberEl = paymentFormContainer.querySelector('#cardNumber');
                const cardholderNameEl = paymentFormContainer.querySelector('#cardholderName');
                const expiryMonthEl = paymentFormContainer.querySelector('#expiryMonth');
                const expiryYearEl = paymentFormContainer.querySelector('#expiryYear');
                const cvvEl = paymentFormContainer.querySelector('#cvv');
                
                if (!cardNumberEl || !cardholderNameEl || !expiryMonthEl || !expiryYearEl || !cvvEl) {
                    alert('Credit card form not found. Please make sure the credit card form is visible.');
                    console.error('Credit card elements not found:', { cardNumberEl, cardholderNameEl, expiryMonthEl, expiryYearEl, cvvEl });
                    return;
                }
                
                const cardNumber = (cardNumberEl.value || '').toString().trim().replace(/\s/g, '');
                const cardholderName = (cardholderNameEl.value || '').toString().trim();
                const expiryMonth = expiryMonthEl.value || '';
                const expiryYear = expiryYearEl.value || '';
                const cvv = (cvvEl.value || '').toString().trim();
                
                console.log('Card values (raw):', {
                    cardNumberRaw: cardNumberEl.value,
                    cardholderNameRaw: cardholderNameEl.value,
                    expiryMonthRaw: expiryMonthEl.value,
                    expiryYearRaw: expiryYearEl.value,
                    cvvRaw: cvvEl.value,
                    cardNumber,
                    cardholderName,
                    expiryMonth,
                    expiryYear,
                    cvv
                });
                
                // Validate credit card fields with specific error messages
                const missingCardFields = [];
                if (!cardNumber || cardNumber.length === 0) missingCardFields.push('Card Number');
                if (!cardholderName || cardholderName.length === 0) missingCardFields.push('Cardholder Name');
                if (!expiryMonth || expiryMonth.length === 0) missingCardFields.push('Expiry Month');
                if (!expiryYear || expiryYear.length === 0) missingCardFields.push('Expiry Year');
                if (!cvv || cvv.length === 0) missingCardFields.push('CVV');
                
                if (missingCardFields.length > 0) {
                    alert(`Please fill in all credit card details:\n\n ${missingCardFields.join('\n ')}`);
                    // Highlight missing fields
                    if (!cardNumber || cardNumber.length === 0) {
                        cardNumberEl.style.borderColor = '#ef4444';
                        cardNumberEl.focus();
                    }
                    if (!cardholderName || cardholderName.length === 0) {
                        cardholderNameEl.style.borderColor = '#ef4444';
                        if (cardNumber && cardNumber.length > 0) cardholderNameEl.focus();
                    }
                    if (!expiryMonth || expiryMonth.length === 0) {
                        expiryMonthEl.style.borderColor = '#ef4444';
                        if (cardNumber && cardNumber.length > 0 && cardholderName && cardholderName.length > 0) expiryMonthEl.focus();
                    }
                    if (!expiryYear || expiryYear.length === 0) {
                        expiryYearEl.style.borderColor = '#ef4444';
                        if (cardNumber && cardNumber.length > 0 && cardholderName && cardholderName.length > 0 && expiryMonth && expiryMonth.length > 0) expiryYearEl.focus();
                    }
                    if (!cvv || cvv.length === 0) {
                        cvvEl.style.borderColor = '#ef4444';
                        if (cardNumber && cardNumber.length > 0 && cardholderName && cardholderName.length > 0 && expiryMonth && expiryMonth.length > 0 && expiryYear && expiryYear.length > 0) cvvEl.focus();
                    }
                    return;
                }
                
                // Reset border colors
                cardNumberEl.style.borderColor = '#d1d5db';
                cardholderNameEl.style.borderColor = '#d1d5db';
                expiryMonthEl.style.borderColor = '#d1d5db';
                expiryYearEl.style.borderColor = '#d1d5db';
                cvvEl.style.borderColor = '#d1d5db';
                
                // Validate card number (basic Luhn check would be better, but for now just check length)
                if (cardNumber.length < 13 || cardNumber.length > 19) {
                    alert('Please enter a valid card number (13-19 digits).');
                    cardNumberEl.style.borderColor = '#ef4444';
                    cardNumberEl.focus();
                    return;
                }
                
                // Validate CVV
                if (cvv.length < 3 || cvv.length > 4) {
                    alert('Please enter a valid CVV (3-4 digits).');
                    cvvEl.style.borderColor = '#ef4444';
                    cvvEl.focus();
                    return;
                }
                
                processCreditCardPayment({
                    cardNumber,
                    cardholderName,
                    expiryMonth,
                    expiryYear,
                    cvv
                });
            }
            
            const purchaseData = {
                fullName: fullName,
                email: email,
                phone: phone,
                contactTime: contactTime,
                additionalNotes: additionalNotes,
                applicationData: userResponses,
                paymentMethod: isPayPalSelected ? 'PayPal' : 'Debit/Credit Card'
            };
            
            localStorage.setItem('lastPurchase', JSON.stringify(purchaseData));
        }

        function processPayPalPayment(option) {
            addUserMessage(`Processing PayPal payment (${option === 'guest' ? 'Guest Checkout' : 'PayPal Account'})...`);
            
            // Calculate total cost including all selected items
            let totalCost = 0;
            let description = 'Visa Application Service';
            
            if (userResponses.selectedVisa) {
                totalCost += userResponses.selectedVisa.basePrice || 0;
                if (userResponses.dependents && userResponses.dependents.length > 0) {
                    totalCost += userResponses.totalDependentCost || 0;
                }
                description = `Visa Application - ${userResponses.selectedVisa.name}`;
            }
            
            if (userResponses.selectedCreditPackage) {
                const creditPrice = parseInt((userResponses.selectedCreditPackage.price || '0').replace('', '').replace('$', '')) || 0;
                totalCost += creditPrice;
                description += ` + ${userResponses.selectedCreditPackage.credits} Credits`;
            }
            
            if (userResponses.selectedPackage) {
                const packagePrice = parseInt((userResponses.selectedPackage.price || '0').replace('', '').replace('$', '')) || 0;
                totalCost += packagePrice;
                description += ` + ${userResponses.selectedPackage.name}`;
            }
            
            // Find the payment form container to render PayPal button in the correct location
            const chatMessages = document.getElementById('chatMessages');
            let paypalContainer = null;
            if (chatMessages) {
                const botMessages = chatMessages.querySelectorAll('.message.bot');
                for (let i = botMessages.length - 1; i >= 0; i--) {
                    const message = botMessages[i];
                    const container = message.querySelector('#paypal-button-container');
                    if (container) {
                        paypalContainer = container;
                        break;
                    }
                }
            }
            
            // If container not found, try global search
            if (!paypalContainer) {
                paypalContainer = document.getElementById('paypal-button-container');
            }
            
            if (!paypalContainer) {
                alert('PayPal container not found. Please refresh and try again.');
                console.error('PayPal button container not found');
                return;
            }
            
            // Clear any existing PayPal buttons
            paypalContainer.innerHTML = '';
            
            // Render PayPal button
            paypal.Buttons({
                createOrder: function(data, actions) {
                    return actions.order.create({
                        purchase_units: [{
                            amount: {
                                value: totalCost.toFixed(2),
                                currency_code: 'GBP'
                            },
                            description: description
                        }]
                    });
                },
                onApprove: function(data, actions) {
                    return actions.order.capture().then(function(details) {
                  
                        addBotMessage(
                            `<div style="background:linear-gradient(135deg, #f0fdf4, #dcfce7);border:1px solid #bbf7d0;padding:1.5rem;border-radius:12px;margin-bottom:1rem;">
                                <div style="display:flex;align-items:center;gap:0.75rem;margin-bottom:1rem;">
                                    <div style="background:#10b981;color:white;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;">
                                        <i class="fas fa-check"></i>
                                    </div>
                                    <div>
                                        <h4 style="color:#1e293b;font-weight:600;margin:0;">Payment Successful!</h4>
                                        <p style="color:#64748b;margin:0;font-size:0.9rem;">PayPal payment processed successfully</p>
                                    </div>
                                </div>
                                <div style="background:white;padding:1rem;border-radius:8px;border:1px solid #bbf7d0;">
                                    <div style="display:flex;justify-content:space-between;margin-bottom:0.5rem;">
                                        <span style="color:#64748b;">Transaction ID:</span>
                                        <span style="font-weight:600;color:#1e293b;">${details.id}</span>
                                    </div>
                                    <div style="display:flex;justify-content:space-between;margin-bottom:0.5rem;">
                                        <span style="color:#64748b;">Payment Method:</span>
                                        <span style="font-weight:600;color:#1e293b;">PayPal ${option === 'guest' ? '(Guest)' : '(Account)'}</span>
                                    </div>
                                    <div style="display:flex;justify-content:space-between;margin-bottom:0.5rem;">
                                        <span style="color:#64748b;">Amount:</span>
                                        <span style="font-weight:600;color:#1e293b;">${details.purchase_units[0].amount.value}</span>
                                    </div>
                                    <div style="display:flex;justify-content:space-between;">
                                        <span style="color:#64748b;">Status:</span>
                                        <span style="color:#10b981;font-weight:600;">Completed</span>
                                    </div>
                                </div>
                            </div>`,
                            [
                                { text: "Start New Application", value: "restart" }
                            ]
                        );
                        
                        // Redirect to journey.html after successful payment
                        setTimeout(function() {
                            window.location.href = 'journey.html';
                        }, 2000);
                    });
                },
                onError: function(err) {
                    addBotMessage(
                        `<div style="background:linear-gradient(135deg, #fef2f2, #fee2e2);border:1px solid #fecaca;padding:1.5rem;border-radius:12px;margin-bottom:1rem;">
                            <div style="display:flex;align-items:center;gap:0.75rem;margin-bottom:1rem;">
                                <div style="background:#ef4444;color:white;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;">
                                    <i class="fas fa-times"></i>
                                </div>
                                <div>
                                    <h4 style="color:#1e293b;font-weight:600;margin:0;">Payment Failed</h4>
                                    <p style="color:#64748b;margin:0;font-size:0.9rem;">There was an error processing your PayPal payment</p>
                                </div>
                            </div>
                        </div>`,
                        [
                            { text: "Try Again", value: "payment" },
                            { text: "Start New Application", value: "restart" }
                        ]
                    );
                }
            }).render(paypalContainer);
            
            // Show the container
            paypalContainer.style.display = 'block';
        }

        function processCreditCardPayment(cardData) {
            addUserMessage(`Processing debit/credit card payment...`);
            
            // Calculate total cost
            let totalCost = 0;
            if (userResponses.selectedVisa) {
                totalCost += userResponses.selectedVisa.basePrice || 0;
                if (userResponses.dependents && userResponses.dependents.length > 0) {
                    totalCost += userResponses.totalDependentCost || 0;
                }
            }
            if (userResponses.selectedCreditPackage) {
                const creditPrice = parseInt((userResponses.selectedCreditPackage.price || '0').replace('', '').replace('$', '')) || 0;
                totalCost += creditPrice;
            }
            if (userResponses.selectedPackage) {
                const packagePrice = parseInt((userResponses.selectedPackage.price || '0').replace('', '').replace('$', '')) || 0;
                totalCost += packagePrice;
            }
            
            // Simulate payment processing
            setTimeout(() => {
                addBotMessage(
                    `<div style="background:linear-gradient(135deg, #f0fdf4, #dcfce7);border:1px solid #bbf7d0;padding:1.5rem;border-radius:12px;margin-bottom:1rem;">
                        <div style="display:flex;align-items:center;gap:0.75rem;margin-bottom:1rem;">
                            <div style="background:#10b981;color:white;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;">
                                <i class="fas fa-check"></i>
                            </div>
                            <div>
                                <h4 style="color:#1e293b;font-weight:600;margin:0;">Payment Successful!</h4>
                                <p style="color:#64748b;margin:0;font-size:0.9rem;">Debit/Credit card payment processed successfully</p>
                            </div>
                        </div>
                        <div style="background:white;padding:1rem;border-radius:8px;border:1px solid #bbf7d0;">
                            <div style="display:flex;justify-content:space-between;margin-bottom:0.5rem;">
                                <span style="color:#64748b;">Transaction ID:</span>
                                <span style="font-weight:600;color:#1e293b;">CC-${Date.now().toString().slice(-8)}</span>
                            </div>
                            <div style="display:flex;justify-content:space-between;margin-bottom:0.5rem;">
                                <span style="color:#64748b;">Card:</span>
                                <span style="font-weight:600;color:#1e293b;">**** **** **** ${cardData.cardNumber.slice(-4)}</span>
                            </div>
                            <div style="display:flex;justify-content:space-between;margin-bottom:0.5rem;">
                                <span style="color:#64748b;">Amount:</span>
                                <span style="font-weight:600;color:#1e293b;">${totalCost.toFixed(2)}</span>
                            </div>
                            <div style="display:flex;justify-content:space-between;">
                                <span style="color:#64748b;">Status:</span>
                                <span style="color:#10b981;font-weight:600;">Completed</span>
                            </div>
                        </div>
                    </div>`,
                    [
                        { text: "Start New Application", value: "restart" }
                    ]
                );
                
                // Redirect to journey.html after successful payment
                setTimeout(function() {
                    window.location.href = 'journey.html';
                }, 2000);
            }, 2000);
        }

        function initializePaymentForm() {
            // Find the payment form container
            const chatMessages = document.getElementById('chatMessages');
            let paymentFormContainer = null;
            
            if (chatMessages) {
                const botMessages = chatMessages.querySelectorAll('.message.bot');
                for (let i = botMessages.length - 1; i >= 0; i--) {
                    const message = botMessages[i];
                    if (message.querySelector('#fullName')) {
                        paymentFormContainer = message;
                        break;
                    }
                }
            }
            
            // Get elements from container or fallback to global
            const selectedMethodInput = paymentFormContainer ? paymentFormContainer.querySelector('#selectedPaymentMethod') : document.getElementById('selectedPaymentMethod');
            if (selectedMethodInput) {
                selectedMethodInput.value = 'paypal';
            }
            
            const paypalOptions = paymentFormContainer ? paymentFormContainer.querySelector('#paypalOptions') : document.getElementById('paypalOptions');
            if (paypalOptions) {
                paypalOptions.style.display = 'block';
            }
            
            const cardForm = paymentFormContainer ? paymentFormContainer.querySelector('#cardForm') : document.getElementById('cardForm');
            if (cardForm) {
                cardForm.style.display = 'none';
            }
            
            const paypalContainer = paymentFormContainer ? paymentFormContainer.querySelector('#paypal-button-container') : document.getElementById('paypal-button-container');
            if (paypalContainer) {
                paypalContainer.style.display = 'block';
            }
            
            // Add event listeners to clear error borders when users type
            const fullNameEl = paymentFormContainer ? paymentFormContainer.querySelector('#fullName') : document.getElementById('fullName');
            const emailEl = paymentFormContainer ? paymentFormContainer.querySelector('#email') : document.getElementById('email');
            const phoneEl = paymentFormContainer ? paymentFormContainer.querySelector('#phone') : document.getElementById('phone');
            const cardNumberEl = paymentFormContainer ? paymentFormContainer.querySelector('#cardNumber') : document.getElementById('cardNumber');
            const cardholderNameEl = paymentFormContainer ? paymentFormContainer.querySelector('#cardholderName') : document.getElementById('cardholderName');
            const expiryMonthEl = paymentFormContainer ? paymentFormContainer.querySelector('#expiryMonth') : document.getElementById('expiryMonth');
            const expiryYearEl = paymentFormContainer ? paymentFormContainer.querySelector('#expiryYear') : document.getElementById('expiryYear');
            const cvvEl = paymentFormContainer ? paymentFormContainer.querySelector('#cvv') : document.getElementById('cvv');
            
            // Function to reset border color on input
            const resetBorder = (element) => {
                if (element) {
                    element.style.borderColor = '#d1d5db';
                }
            };
            
            // Add input event listeners to all form fields
            if (fullNameEl) {
                fullNameEl.addEventListener('input', () => resetBorder(fullNameEl));
            }
            if (emailEl) {
                emailEl.addEventListener('input', () => resetBorder(emailEl));
            }
            if (phoneEl) {
                phoneEl.addEventListener('input', () => resetBorder(phoneEl));
            }
            if (cardNumberEl) {
                cardNumberEl.addEventListener('input', () => resetBorder(cardNumberEl));
            }
            if (cardholderNameEl) {
                cardholderNameEl.addEventListener('input', () => resetBorder(cardholderNameEl));
            }
            if (expiryMonthEl) {
                expiryMonthEl.addEventListener('change', () => resetBorder(expiryMonthEl));
            }
            if (expiryYearEl) {
                expiryYearEl.addEventListener('change', () => resetBorder(expiryYearEl));
            }
            if (cvvEl) {
                cvvEl.addEventListener('input', () => resetBorder(cvvEl));
            }
            
            console.log('Payment form initialized');
        }

        
        function handleEmailDetails() {
            addUserMessage("No - Ok sure, we can email you details and you can then come back to us.");
            
            setTimeout(() => {
                addBotMessage(
                    "Perfect! We'll email you all the details and you can return to complete your application whenever you're ready. Thank you for using our UK Visa Application Assistant!",
                    [
                        { text: "Start New Application", value: "restart" }
                    ]
                );
            }, 1000);
        }

    
        const hireGloballyBtn = document.getElementById('hireGloballyBtn');
        if (hireGloballyBtn) {
            hireGloballyBtn.addEventListener('click', function() {
                chatModal.classList.add('active');
                initChat();
                
                setTimeout(() => {
                    smoothScrollToBottom();
                }, 100);
            });
        }

        if (closeChat) {
            closeChat.addEventListener('click', function() {
                chatModal.classList.remove('active');
            });
        }

        
        chatModal.addEventListener('click', function(e) {
            if (e.target === chatModal) {
                chatModal.classList.remove('active');
            }
        });

        
        function restartApplication() {
            initChat();
        }

        
      
        function showDeadlineForm() {
            document.getElementById('deadlineForm').style.display = 'block';
            scrollToForm();
        }

        function showIssuesForm() {
            document.getElementById('issuesForm').style.display = 'block';
            scrollToForm();
        }

        function showPreviousVisaForm() {
            document.getElementById('previousVisaForm').style.display = 'block';
            scrollToForm();
        }

        function showSponsorForm() {
            document.getElementById('sponsorForm').style.display = 'block';
            scrollToForm();
        }

        function showDependentsForm() {
            document.getElementById('dependentsForm').style.display = 'block';
            scrollToForm();
        }

        function showCreditsPackages() {
            document.getElementById('creditsPackages').style.display = 'block';
            scrollToForm();
        }

        let dependentsCount = 0;

        function addDependent() {
            dependentsCount++;
            const dependentsList = document.getElementById('dependentsList');
            const dependentDiv = document.createElement('div');
            dependentDiv.id = `dependent-${dependentsCount}`;
            dependentDiv.style.cssText = 'background:#f8fafc;padding:1rem;border-radius:12px;margin-bottom:1rem;border:1px solid #e2e8f0;';
            dependentDiv.innerHTML = `
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;">
                    <h5 style="color:#1e293b;font-weight:600;margin:0;">Dependent ${dependentsCount}</h5>
                    <button onclick="removeDependent(${dependentsCount})" style="background:#ef4444;color:white;border:none;border-radius:6px;padding:0.25rem 0.5rem;cursor:pointer;font-size:0.8rem;">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem;">
                    <div>
                        <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Full Name</label>
                        <input type="text" id="dependent-name-${dependentsCount}" placeholder="Enter full name" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                    </div>
                    <div>
                        <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Relationship</label>
                        <select id="dependent-relationship-${dependentsCount}" onchange="updateDependentCost(${dependentsCount})" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                            <option value="">Select relationship</option>
                            <option value="spouse">Spouse/Partner</option>
                            <option value="child">Child (Under 18)</option>
                            <option value="adult-child">Adult Child (18+)</option>
                            <option value="parent">Parent</option>
                            <option value="other">Other Family Member</option>
                        </select>
                    </div>
                </div>
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem;">
                    <div>
                        <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Date of Birth</label>
                        <input type="date" id="dependent-dob-${dependentsCount}" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                    </div>
                    <div>
                        <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Nationality</label>
                        <input type="text" id="dependent-nationality-${dependentsCount}" placeholder="Enter nationality" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                    </div>
                </div>
                <div>
                    <label style="display:block;margin-bottom:0.5rem;color:#374151;font-weight:500;">Passport Number</label>
                    <input type="text" id="dependent-passport-${dependentsCount}" placeholder="Enter passport number" style="width:100%;padding:0.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:1rem;">
                </div>
                <div id="dependent-cost-${dependentsCount}" style="display:none;background:linear-gradient(135deg, #f0fdf4, #dcfce7);padding:1rem;border-radius:12px;margin-top:1rem;border:2px solid #10b981;box-shadow:0 4px 12px rgba(16,185,129,0.15);">
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:0.5rem;">
                        <span style="color:#374151;font-weight:600;font-size:1rem;">Additional Cost:</span>
                        <span id="dependent-cost-amount-${dependentsCount}" style="color:#059669;font-weight:800;font-size:1.3rem;">0</span>
                    </div>
                    <div id="dependent-cost-details-${dependentsCount}" style="color:#64748b;font-size:0.9rem;margin-top:0.5rem;background:white;padding:0.75rem;border-radius:8px;border-left:3px solid #10b981;"></div>
                </div>
            `;
            dependentsList.appendChild(dependentDiv);
            scrollToForm();
        }

        function updateDependentCost(dependentId) {
            const relationship = document.getElementById(`dependent-relationship-${dependentId}`).value;
            const costDiv = document.getElementById(`dependent-cost-${dependentId}`);
            const costAmount = document.getElementById(`dependent-cost-amount-${dependentId}`);
            const costDetails = document.getElementById(`dependent-cost-details-${dependentId}`);
            
            if (!relationship || !userResponses.selectedVisa) {
                costDiv.style.display = 'none';
                return;
            }

            const dependentCosts = loadDependentCostsFromAdmin();
            const dependentRule = dependentCosts.find(dc => 
                dc.visaTypeName === userResponses.selectedVisa.name && 
                dc.dependentType === relationship
            );

            if (dependentRule) {
                costAmount.textContent = `${dependentRule.additionalCost}`;
                costDetails.innerHTML = `
                    <div style="margin-bottom:0.5rem;">
                        <strong style="color:#374151;">Requirements:</strong> ${dependentRule.requirements.join(', ')}
                    </div>
                    ${dependentRule.notes ? `<div style="margin-bottom:0.25rem;"><strong style="color:#374151;">Notes:</strong> ${dependentRule.notes}</div>` : ''}
                    <div style="margin-top:0.5rem;padding-top:0.5rem;border-top:1px solid #e2e8f0;font-size:0.85rem;color:#64748b;">
                        <i class="fas fa-clock" style="margin-right:0.25rem;"></i>
                        Additional processing time: ${dependentRule.processingTime || 0} days
                    </div>
                `;
                costDiv.style.display = 'block';
                
                
                costDiv.style.animation = 'pulse 0.6s ease-in-out';
                setTimeout(() => {
                    costDiv.style.animation = '';
                }, 600);
            } else {
                costDiv.style.display = 'none';
            }
            
            updateTotalCost();
        }

        function updateTotalCost() {
            const totalCostDiv = document.getElementById('totalCostDisplay');
            if (!totalCostDiv || !userResponses.selectedVisa) return;

            let totalCost = userResponses.selectedVisa.basePrice;
            let dependentsCost = 0;
            const dependentCosts = loadDependentCostsFromAdmin();
            
            for (let i = 1; i <= dependentsCount; i++) {
                const dependentDiv = document.getElementById(`dependent-${i}`);
                if (dependentDiv) {
                    const relationship = document.getElementById(`dependent-relationship-${i}`).value;
                    if (relationship) {
                        const dependentRule = dependentCosts.find(dc => 
                            dc.visaTypeName === userResponses.selectedVisa.name && 
                            dc.dependentType === relationship
                        );
                        if (dependentRule) {
                            dependentsCost += dependentRule.additionalCost;
                        }
                    }
                }
            }

            totalCost += dependentsCost;

            
            if (dependentsCost > 0) {
                totalCostDiv.style.display = 'block';
                totalCostDiv.innerHTML = `
                    <div style="background:linear-gradient(135deg, #f0fdf4, #dcfce7);border:1px solid #bbf7d0;padding:1rem;border-radius:12px;margin-top:1rem;">
                        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:0.5rem;">
                            <span style="color:#374151;font-weight:600;">Base Visa Cost:</span>
                            <span style="color:#059669;font-weight:700;">${userResponses.selectedVisa.basePrice}</span>
                        </div>
                        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:0.5rem;">
                            <span style="color:#374151;font-weight:600;">Dependents Cost:</span>
                            <span style="color:#059669;font-weight:700;">${dependentsCost}</span>
                        </div>
                        <div style="display:flex;justify-content:space-between;align-items:center;border-top:1px solid #bbf7d0;padding-top:0.5rem;">
                            <span style="color:#374151;font-weight:700;font-size:1.1rem;">Total Cost:</span>
                            <span style="color:#059669;font-weight:800;font-size:1.2rem;">${totalCost}</span>
                        </div>
                    </div>
                `;
            } else {
                totalCostDiv.style.display = 'none';
            }
        }

        function removeDependent(id) {
            const dependentDiv = document.getElementById(`dependent-${id}`);
            if (dependentDiv) {
                dependentDiv.remove();
            }
        }

        function submitDependentsForm() {
            const dependents = [];
            let totalDependentCost = 0;
            const dependentCosts = loadDependentCostsFromAdmin();
            
            for (let i = 1; i <= dependentsCount; i++) {
                const dependentDiv = document.getElementById(`dependent-${i}`);
                if (dependentDiv) {
                    const name = document.getElementById(`dependent-name-${i}`).value;
                    const relationship = document.getElementById(`dependent-relationship-${i}`).value;
                    const dob = document.getElementById(`dependent-dob-${i}`).value;
                    const nationality = document.getElementById(`dependent-nationality-${i}`).value;
                    const passport = document.getElementById(`dependent-passport-${i}`).value;
                    
                    if (name && relationship && dob) {
                        
                        let dependentCost = 0;
                        if (userResponses.selectedVisa) {
                            const dependentRule = dependentCosts.find(dc => 
                                dc.visaTypeName === userResponses.selectedVisa.name && 
                                dc.dependentType === relationship
                            );
                            if (dependentRule) {
                                dependentCost = dependentRule.additionalCost;
                                totalDependentCost += dependentCost;
                            }
                        }

                        dependents.push({
                            name: name,
                            relationship: relationship,
                            type: relationship, 
                            dateOfBirth: dob,
                            nationality: nationality,
                            passportNumber: passport,
                            additionalCost: dependentCost
                        });
                    }
                }
            }
            
            if (dependents.length === 0) {
                alert('Please add at least one dependent with required information.');
                return;
            }
            
            userResponses[`step${currentStep}`] = 'yes';
            userResponses.dependents = dependents;
            userResponses.totalDependentCost = totalDependentCost;
            
            const dependentNames = dependents.map(d => `${d.name} (${d.relationship})`).join(', ');
            addUserMessage(`Dependents: ${dependentNames}`);
            
            setTimeout(() => {
                processStep();
            }, 1000);
        }

    
        function submitDeadlineForm() {
            const deadlineDate = document.getElementById('deadlineDate').value;
            const deadlineReason = document.getElementById('deadlineReason').value;
            const deadlineDetails = document.getElementById('deadlineDetails').value;
            
            if (!deadlineDate || !deadlineReason) {
                alert('Please fill in all required fields.');
                return;
            }
            
            const deadlineData = {
                date: deadlineDate,
                reason: deadlineReason,
                details: deadlineDetails
            };
            
            userResponses[`step${currentStep}`] = 'yes';
            userResponses.deadlineDetails = deadlineData;
            
            addUserMessage(`Deadline: ${deadlineDate} - ${deadlineReason}${deadlineDetails ? ' - ' + deadlineDetails : ''}`);
            
            setTimeout(() => {
                processStep();
            }, 1000);
        }

        function submitIssuesForm() {
            const issueType = document.getElementById('issueType').value;
            const issueDate = document.getElementById('issueDate').value;
            const issueCountry = document.getElementById('issueCountry').value;
            const issueDescription = document.getElementById('issueDescription').value;
            const issueResolution = document.getElementById('issueResolution').value;
            
            if (!issueType || !issueDate) {
                alert('Please fill in all required fields.');
                return;
            }
            
            const issueData = {
                type: issueType,
                date: issueDate,
                country: issueCountry,
                description: issueDescription,
                resolution: issueResolution
            };
            
            userResponses[`step${currentStep}`] = 'yes';
            userResponses.issueDetails = issueData;
            
            addUserMessage(`Issue: ${issueType} on ${issueDate}${issueCountry ? ' in ' + issueCountry : ''}`);
            
            setTimeout(() => {
                processStep();
            }, 1000);
        }

        function submitPreviousVisaForm() {
            const previousVisaType = document.getElementById('previousVisaType').value;
            const previousVisaIssueDate = document.getElementById('previousVisaIssueDate').value;
            const previousVisaExpiryDate = document.getElementById('previousVisaExpiryDate').value;
            const previousVisaNumber = document.getElementById('previousVisaNumber').value;
            const previousVisaPurpose = document.getElementById('previousVisaPurpose').value;
            const previousVisaIssues = document.getElementById('previousVisaIssues').value;
            
            if (!previousVisaType || !previousVisaIssueDate) {
                alert('Please fill in all required fields.');
                return;
            }
            
            const previousVisaData = {
                type: previousVisaType,
                issueDate: previousVisaIssueDate,
                expiryDate: previousVisaExpiryDate,
                number: previousVisaNumber,
                purpose: previousVisaPurpose,
                issues: previousVisaIssues
            };
            
            userResponses[`step${currentStep}`] = 'yes';
            userResponses.previousVisaDetails = previousVisaData;
            
            addUserMessage(`Previous UK Visa: ${previousVisaType} issued on ${previousVisaIssueDate}`);
            
            setTimeout(() => {
                processStep();
            }, 1000);
        }

        function submitSponsorForm() {
            const sponsorType = document.getElementById('sponsorType').value;
            const sponsorName = document.getElementById('sponsorName').value;
            const sponsorEmail = document.getElementById('sponsorEmail').value;
            const sponsorPhone = document.getElementById('sponsorPhone').value;
            const sponsorAddress = document.getElementById('sponsorAddress').value;
            const sponsorDetails = document.getElementById('sponsorDetails').value;
            
            if (!sponsorType || !sponsorName) {
                alert('Please fill in all required fields.');
                return;
            }
            
            const sponsorData = {
                type: sponsorType,
                name: sponsorName,
                email: sponsorEmail,
                phone: sponsorPhone,
                address: sponsorAddress,
                details: sponsorDetails
            };
            
            userResponses[`step${currentStep}`] = 'yes';
            userResponses.sponsorDetails = sponsorData;
            
            addUserMessage(`Sponsor: ${sponsorName} (${sponsorType})`);
            
            setTimeout(() => {
                processStep();
            }, 1000);
        }

        function showCreditsPackages() {
            document.getElementById('creditsPackages').style.display = 'block';
        }

        function selectCreditPackage(packageIndex) {
            const selectedPackage = creditPackages[packageIndex];
            userResponses[`step${currentStep}`] = 'yes';
            userResponses.selectedCreditPackage = selectedPackage;
            
            addUserMessage(`Selected: ${selectedPackage.credits} Credits for ${selectedPackage.price}`);
            
            setTimeout(() => {
                processStep();
            }, 1000);
        }

        window.selectOption = selectOption;
        window.handleInputKeyPress = handleInputKeyPress;
        window.selectPaymentMethod = selectPaymentMethod;
        window.processPayment = processPayment;
        window.processPayPalPayment = processPayPalPayment;
        window.processCreditCardPayment = processCreditCardPayment;
        window.initializePaymentForm = initializePaymentForm;
        window.handleEmailDetails = handleEmailDetails;
        window.restartApplication = restartApplication;
        window.showDeadlineForm = showDeadlineForm;
        window.showIssuesForm = showIssuesForm;
        window.showPreviousVisaForm = showPreviousVisaForm;
        window.showSponsorForm = showSponsorForm;
        window.showDependentsForm = showDependentsForm;
        window.addDependent = addDependent;
        window.removeDependent = removeDependent;
        window.submitDependentsForm = submitDependentsForm;
        window.updateDependentCost = updateDependentCost;
        window.updateTotalCost = updateTotalCost;
        window.showCreditsPackages = showCreditsPackages;
        window.selectCreditPackage = selectCreditPackage;
        window.submitDeadlineForm = submitDeadlineForm;
        window.submitIssuesForm = submitIssuesForm;
        window.submitPreviousVisaForm = submitPreviousVisaForm;
        window.submitSponsorForm = submitSponsorForm;

        
        function debugImageLoading() {
            const images = document.querySelectorAll('.steps-img img');
            images.forEach((img, index) => {
                console.log(`Image ${index + 1}:`, img.src);
                img.addEventListener('load', () => {
                    console.log(`Image ${index + 1} loaded successfully:`, img.src);
                    img.style.border = '2px solid #10b981';
                });
                img.addEventListener('error', (e) => {
                    console.error(`Image ${index + 1} failed to load:`, img.src, e);
                    img.style.border = '2px solid #ef4444';
                    img.style.background = '#fef2f2';
                    img.style.display = 'flex';
                    img.style.alignItems = 'center';
                    img.style.justifyContent = 'center';
                    img.style.color = '#dc2626';
                    img.style.fontSize = '1rem';
                    img.style.fontWeight = '500';
                    img.innerHTML = 'Image failed to load';
                });
            });
        }

        document.addEventListener('DOMContentLoaded', debugImageLoading);
        
        
        function initBackgroundAnimations() {
            const particles = document.querySelectorAll('.particle');
            const shapes = document.querySelectorAll('.animated-shape');
            const orbs = document.querySelectorAll('.gradient-orb');
            const floatingElements = document.querySelectorAll('.floating-element');
            
            window.addEventListener('scroll', () => {
                const scrolled = window.pageYOffset;
                const rate = scrolled * -0.5;
                
            
                particles.forEach((particle, index) => {
                    const speed = 0.1 + (index * 0.05);
                    particle.style.transform = `translateY(${rate * speed}px)`;
                });
                
                
                shapes.forEach((shape, index) => {
                    const speed = 0.15 + (index * 0.03);
                    shape.style.transform = `translateY(${rate * speed}px) rotate(${scrolled * 0.1}deg)`;
                });
                
            
                orbs.forEach((orb, index) => {
                    const speed = 0.08 + (index * 0.02);
                    orb.style.transform = `translateY(${rate * speed}px)`;
                });
                
                
                floatingElements.forEach((element, index) => {
                    const speed = 0.12 + (index * 0.04);
                    element.style.transform = `translateY(${rate * speed}px)`;
                });
            });
        }
        
        
        initBackgroundAnimations();

        
        function updateVisaSummary() {
            let summaryDiv = document.getElementById('selectedVisaSummary');
            if (!summaryDiv) {
                summaryDiv = document.createElement('div');
                summaryDiv.id = 'selectedVisaSummary';
                summaryDiv.style.cssText = 'background: linear-gradient(135deg, #f8fafc, #e2e8f0); border-left: 4px solid #6366f1; padding: 1.25rem 1.5rem; margin-bottom: 1rem; border-radius: 16px; font-size: 1.05rem; font-weight: 600; color: #1e293b; display: flex; align-items: center; gap: 1rem; box-shadow: 0 4px 20px rgba(0,0,0,0.08); border: 1px solid #e2e8f0;';
                chatMessages.parentNode.insertBefore(summaryDiv, chatMessages);
            }
            
            if (userResponses.selectedVisa) {
                let totalCost = userResponses.selectedVisa.basePrice;
                let dependentsInfo = '';
                
                if (userResponses.dependents && userResponses.dependents.length > 0) {
                    totalCost += userResponses.totalDependentCost || 0;
                    dependentsInfo = `
                        <div style='margin-top:0.5rem;padding-top:0.5rem;border-top:1px solid #e2e8f0;'>
                            <div style='color:#64748b;font-size:0.9rem;'>
                                <i class='fas fa-users' style='margin-right:0.5rem;'></i>
                                ${userResponses.dependents.length} dependent(s) - +${userResponses.totalDependentCost || 0}
                            </div>
                        </div>
                    `;
                }
                
                summaryDiv.innerHTML = `
                    <div style='background:linear-gradient(135deg, #6366f1, #4f46e5);color:white;padding:0.5rem;border-radius:12px;box-shadow:0 2px 8px rgba(99,102,241,0.3);'>
                        <i class='fas fa-passport' style='font-size:1.2rem;'></i>
                    </div>
                    <div style='flex:1;'>
                        <div style='font-weight:700;color:#1e293b;font-size:1.1rem;'>Selected Visa</div>
                        <div style='color:#64748b;font-size:0.95rem;'>${userResponses.selectedVisa.name}${userResponses.selectedVisa.description ? ' - ' + userResponses.selectedVisa.description : ''}</div>
                        <div style='color:#059669;font-weight:700;font-size:1rem;margin-top:0.25rem;'>Total Cost: ${totalCost}</div>
                        ${dependentsInfo}
                    </div>
                `;
                summaryDiv.style.display = 'flex';
            } else {
                summaryDiv.style.display = 'none';
            }
        }
    
        const templateChatModal = document.createElement('div');
        templateChatModal.id = 'templateChatModal';
        templateChatModal.className = 'chat-modal';
        templateChatModal.innerHTML = `
            <div class="chat-container">
                <div class="chat-header">
                    <h3>
                        <i class="fas fa-cogs"></i>
                        Buy Templates & Packages
                      
                    </h3>
                    <button class="close-btn" id="closeTemplateChat">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="chat-body">
                    <div class="chat-messages" id="templateChatMessages">
                        
                    </div>
                </div>
            </div>
        `;
        document.body.appendChild(templateChatModal);

        let templateCurrentStep = 1;
        let templateUserResponses = {};
        const templateChatMessages = templateChatModal.querySelector('#templateChatMessages');
        const closeTemplateChat = templateChatModal.querySelector('#closeTemplateChat');

    
        function initTemplateChat() {
            templateCurrentStep = 1;
            templateUserResponses = {};
            templateChatMessages.innerHTML = '';
            
         
            const indicator = document.createElement('div');
            indicator.className = 'step-indicator';
            indicator.textContent = 'Step 1 of 4';
            templateChatMessages.appendChild(indicator);
            
          
            setTimeout(() => {
                showTemplateStep(1);
            }, 500);
        }

        function addTemplateBotMessage(text, options = null) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message bot';
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.innerHTML = '<i class="fas fa-robot"></i>';
            
            const content = document.createElement('div');
            content.className = 'message-content';
            
            const textDiv = document.createElement('div');
            textDiv.className = 'message-text';
            textDiv.innerHTML = text;
            
            content.appendChild(textDiv);
            
            if (options) {
                const optionsDiv = document.createElement('div');
                optionsDiv.className = 'message-options';
                
                if (options.length <= 2) {
                    optionsDiv.className = 'message-options yes-no-options';
                } else {
                    const rows = Math.ceil(options.length / 3);
                    for (let i = 0; i < rows; i++) {
                        const row = document.createElement('div');
                        row.className = 'options-row';
                        
                        for (let j = i * 3; j < Math.min((i + 1) * 3, options.length); j++) {
                            const button = document.createElement('button');
                            button.className = 'option-btn';
                            button.textContent = options[j].text;
                            button.setAttribute('data-value', options[j].value);
                            button.onclick = () => handleTemplateOptionClick(options[j].value, button.textContent);
                            row.appendChild(button);
                        }
                        optionsDiv.appendChild(row);
                    }
                }
                
                content.appendChild(optionsDiv);
            }
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(content);
            templateChatMessages.appendChild(messageDiv);
            
            smoothScrollToBottomTemplate();
        }

        function addTemplateUserMessage(text) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message user';
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.innerHTML = '<i class="fas fa-user"></i>';
            
            const content = document.createElement('div');
            content.className = 'message-content';
            
            const textDiv = document.createElement('div');
            textDiv.className = 'message-text';
            textDiv.textContent = text;
            
            content.appendChild(textDiv);
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(content);
            templateChatMessages.appendChild(messageDiv);
            
            smoothScrollToBottomTemplate();
        }

        function smoothScrollToBottomTemplate() {
            setTimeout(() => {
                templateChatMessages.scrollTop = templateChatMessages.scrollHeight;
            }, 100);
        }

        function updateTemplateStepIndicator() {
            const indicator = templateChatModal.querySelector('.step-indicator');
            if (indicator) {
                indicator.textContent = `Step ${templateCurrentStep} of 4`;
            }
        }

        function handleTemplateOptionClick(value, text) {
            templateUserResponses[`step${templateCurrentStep}`] = value;
            addTemplateUserMessage(text);
            
            templateCurrentStep++;
            
            if (templateCurrentStep <= 4) {
                setTimeout(() => {
                    showTemplateStep(templateCurrentStep);
                }, 500);
            } else {
                setTimeout(() => {
                    addTemplateBotMessage("A few more details to help us build your template package?");
                }, 500);
            }
        }

        function showTemplateStep(stepNumber) {
            updateTemplateStepIndicator();
            
            if (stepNumber === 1) {
                addTemplateBotMessage(
                    "Hey, hope you're well. <span style='text-decoration: underline;'>Let's</span> help you package your UK visa program. All information provided is secure. You can always click to go back and make changes to your selections.",
                    [
                        { text: "Need a template", value: "need_template" },
                        { text: "Need to know what documents to provide", value: "need_documents" },
                        { text: "Need a business plan?", value: "need_business_plan" },
                        { text: "Need a legal cover letter to support the visa application?", value: "need_cover_letter" },
                        { text: "Please check my visa form and documents.", value: "check_form" }
                    ]
                );
            } else if (stepNumber === 2) {
                addTemplateBotMessage(
                    "Thank you. <span style='text-decoration: underline;'>So</span> let's help you find the right products. Are you?",
                    [
                        { text: "Individual", value: "individual" },
                        { text: "Entrepreneur or business person", value: "entrepreneur" },
                        { text: "Business or organisation", value: "business" }
                    ]
                );
            } else if (stepNumber === 3) {
                addTemplateBotMessage(
                    "Is your matter related to an application being refused or intend to challenge against a decision.",
                    [
                        { text: "Yes", value: "yes" },
                        { text: "No", value: "no" }
                    ]
                );
            } else if (stepNumber === 4) {
                addTemplateBotMessage(
                    "Do you wish to discuss about documents including assessing the documents required for an application or if refused, for us to check those?",
                    [
                        { text: "Yes", value: "yes" },
                        { text: "No", value: "no" }
                    ]
                );
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            const buyTemplatesBtn = document.getElementById('buyTemplatesBtn');

            if (buyTemplatesBtn) {
           
                buyTemplatesBtn.removeEventListener('click', buyTemplatesBtn._originalClickHandler);
             
                const newClickHandler = function() {
                    templateChatModal.classList.add('active');
                    initTemplateChat();
                    
                    setTimeout(() => {
                        smoothScrollToBottomTemplate();
                    }, 100);
                };
                
                buyTemplatesBtn.addEventListener('click', newClickHandler);
                buyTemplatesBtn._originalClickHandler = newClickHandler;
            }

            if (closeTemplateChat) {
                closeTemplateChat.addEventListener('click', function() {
                    templateChatModal.classList.remove('active');
                });
            }

            
            templateChatModal.addEventListener('click', function(e) {
                if (e.target === templateChatModal) {
                    templateChatModal.classList.remove('active');
                }
            });
        });
        
    </script>
</body>
</html> 